import{a as ee}from"./chunk-BSRM4IRA.js";import{a as N,b as H,c as X,f as U}from"./chunk-TQIT5NBE.js";import{a as G,b as W,d as Z}from"./chunk-R66P2ZV3.js";import{f as Y}from"./chunk-AJ6EMB42.js";import{a as V}from"./chunk-YTT2JQB3.js";import{o as S}from"./chunk-FM2UNIMX.js";import{Aa as O,Ab as q,Bb as L,Cb as h,Cc as r,Db as m,Dc as D,Eb as c,Fa as F,Fb as x,Fc as B,Jb as R,Nb as Q,Ob as u,Wa as o,Wb as w,Xb as T,Y as j,Yb as $,ac as l,ba as d,bc as y,ga as I,gb as M,ha as k,ib as P,la as K,ra as _,wb as g,xa as z,xb as J,zb as A,zc as v}from"./chunk-OH5MFEO2.js";var te="MathJax-script",ie=(()=>{let t=class t{constructor(){this.document=d(K),this.platformId=d(F),this.config=d(V),this.mathJaxLoadingPromise=this.loadMathJax(this.config).catch(e=>{console.error("MathJax failed to load",e)})}render(e,i){this.mathJaxLoadingPromise.then(()=>{if(t.isMathJax(e)){let n=t.fixMathJaxBugs(e);i.innerHTML=`<span class='jax-process'>${n}</span>`,window.MathJax.startup.promise.then(()=>{window.MathJax.typesetPromise([i]).catch(f=>console.error("MathJax typeset failed: "+f.message))})}else i.innerHTML=e})}static isMathJax(e){return!!e?.match(/(?:\$|\\\(|\\\[|\\begin\{.*?})/)}static fixMathJaxBugs(e){return e.replace(/<br \/>/gi,"<br/> ").replace(/[$]([\s\S]+?)[$]/gi,(i,n,f,C)=>n.includes("\\\\")&&!n.includes("\\begin")?`$\\begin{align*}${n}\\end{align*}$`:`$${n}$`)}isMathJaxLoaded(){return!S(this.platformId)||!this.document||this.document===null?!1:!!document.getElementById(te)}async loadMathJax(e){return!S(this.platformId)||!this.document||this.document===null?Promise.reject("No document object"):this.isMathJaxLoaded()?Promise.resolve("MathJax already loaded"):new Promise((i,n)=>{let f={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],packages:["base","require","ams"]},svg:{fontCache:"global"}},C=document.createElement("script");C.type="text/javascript",C.text=`MathJax = ${JSON.stringify(f)}`,document.head.appendChild(C);let s=document.createElement("script");s.id=te,s.type="text/javascript",s.async=!0,e.online?s.src=`https://cdn.jsdelivr.net/npm/mathjax@${e.version}/es5/${e.config}.js`:s.src=`assets/mathjax/es5/${e.config}.js`,s.onload=()=>{i("MathJax loaded")},s.onerror=()=>{n("Error loading MathJax")},document.head.appendChild(s)})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"});let a=t;return a})();var E=(()=>{let t=class t{constructor(){this.mathJaxService=d(ie),this.element=d(O),this.mbMathJax=r(),v(()=>{let e=this.mbMathJax();e&&(console.log("directive effect:",e),this.render(e))})}ngOnChanges(e){let i=e.mbMathJax;if(console.log("directive changes 0:",i),!i)return;let n=i.currentValue;console.log("directive changes 1:",n),this.render(n)}render(e){this.mathJaxService.render(e,this.element.nativeElement)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=P({type:t,selectors:[["","mbMathJax",""]],inputs:{mbMathJax:[1,"mbMathJax"]},features:[z]});let a=t;return a})();var ae=(()=>{let t=class t{constructor(){this.expression=r.required(),this.mathJaxDirective=D.required(E),v(()=>{let e=this.expression();this.mathJaxDirective().render(e)})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=M({type:t,selectors:[["mb-mathjax"]],viewQuery:function(i,n){i&1&&w(n.mathJaxDirective,E,5),i&2&&T()},inputs:{expression:[1,"expression"]},decls:2,vars:1,consts:[[3,"mbMathJax"]],template:function(i,n){i&1&&(m(0,"span",0),l(1),c()),i&2&&(o(),y(n.expression()))},dependencies:[E],encapsulation:2,changeDetection:0});let a=t;return a})();var oe=["autosize"];function re(a,t){if(a&1&&(m(0,"div"),l(1," MathJax display: "),x(2,"mb-mathjax",4),c()),a&2){let p=u();o(2),h("expression",p.displayExpression())}}function se(a,t){if(a&1&&(m(0,"div"),l(1," KaTeX display: "),x(2,"mb-katex",5),c()),a&2){let p=u(),e=$(7);o(2),h("expression",e.value)("options",p.katexDisplayOptions)}}function ce(a,t){if(a&1&&(m(0,"div"),l(1," MathJax inline: "),x(2,"mb-mathjax",4),c()),a&2){let p=u();o(2),h("expression",p.inlineExpression())}}function pe(a,t){if(a&1&&(m(0,"div"),l(1," KaTeX inline: "),x(2,"mb-katex",5),c()),a&2){let p=u(),e=$(7);o(2),h("expression",e.value)("options",p.katexInlineOptions)}}var ne=(()=>{let t=class t{constructor(){this.changeDetectionRef=d(B),this.autosize=D.required("autosize"),this.sample=r.required(),this.showMathJax=r(!0),this.showKatex=r(!0),this.displayExpression=_(""),this.inlineExpression=_(""),this.katexDisplayOptions={displayMode:!0,throwOnError:!1,strict:!0},this.katexInlineOptions={displayMode:!1,throwOnError:!1,strict:!0},v(()=>{let e=this.sample().code;this.updateMathJax(e)})}ngAfterViewChecked(){this.autosize().resizeToFitContent(!0),this.changeDetectionRef.detectChanges()}updateMathJax(e){this.displayExpression.set("$$"+e+"$$"),this.inlineExpression.set("$"+e+"$")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=M({type:t,selectors:[["app-tex-sample-card"]],viewQuery:function(i,n){i&1&&w(n.autosize,oe,5),i&2&&T()},inputs:{sample:[1,"sample"],showMathJax:[1,"showMathJax"],showKatex:[1,"showKatex"]},decls:14,vars:6,consts:[["source","","autosize","cdkTextareaAutosize"],["appearance","outlined",1,"tex-card","mat-elevation-z4"],[1,"tex-card-full-width"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","100",1,"tex-card-textarea",3,"input"],[3,"expression"],[3,"expression","options"]],template:function(i,n){if(i&1){let f=R();m(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title"),l(3),c()(),m(4,"mat-card-content")(5,"mat-form-field",2)(6,"textarea",3,0),Q("input",function(){I(f);let s=$(7);return k(n.updateMathJax(s.value))}),l(9),c()(),g(10,re,3,1,"div"),g(11,se,3,2,"div"),g(12,ce,3,1,"div"),g(13,pe,3,2,"div"),c()()}i&2&&(o(3),y(n.sample().name),o(6),y(n.sample().code),o(),J(n.showMathJax()?10:-1),o(),J(n.showKatex()?11:-1),o(),J(n.showMathJax()?12:-1),o(),J(n.showKatex()?13:-1))},dependencies:[N,U,H,X,Z,Y,W,G,ae,ee],styles:[".tex-card[_ngcontent-%COMP%]{margin-bottom:8px}.tex-card-full-width[_ngcontent-%COMP%]{width:100%}"],changeDetection:0});let a=t;return a})();function de(a,t){if(a&1&&x(0,"app-tex-sample-card",0),a&2){let p=t.$implicit,e=u();h("sample",p)("showMathJax",e.showMathJax())("showKatex",e.showKatex())}}var qe=(()=>{let t=class t{constructor(){this.samples=r.required(),this.showMathJax=r(!0),this.showKatex=r(!0)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=M({type:t,selectors:[["app-tex-sample-list"]],inputs:{samples:[1,"samples"],showMathJax:[1,"showMathJax"],showKatex:[1,"showKatex"]},decls:2,vars:0,consts:[[3,"sample","showMathJax","showKatex"]],template:function(i,n){i&1&&q(0,de,1,3,"app-tex-sample-card",0,A),i&2&&L(n.samples())},dependencies:[ne],encapsulation:2,changeDetection:0});let a=t;return a})();export{qe as a};
