import{a as w}from"./chunk-3H6C7N3C.js";import{Ca as U,Da as V,G as _,Qa as W,X as j,b as d,k as N}from"./chunk-GXN2U6XA.js";import{o as x}from"./chunk-5NZO7CYW.js";import{Aa as R,Fa as D,Ic as G,Lc as I,Xb as z,Yb as E,ca as u,ib as S,tb as $}from"./chunk-VOP6QBU4.js";W();var J=["*"],K=160,Q=24,ie=(()=>{let a=class a{constructor(){this.elementRef=u(R),this.platformId=u(D),this.data=I.required(),G(()=>{this.currentData=this.data(),this.render()}),$({write:()=>{this.setupResizeObserver(),this.render()}})}ngOnDestroy(){this.resizeObserver?.disconnect()}setupResizeObserver(){x(this.platformId)&&(this.resizeObserver=new ResizeObserver(()=>{this.render()}),this.resizeObserver.observe(this.elementRef.nativeElement))}render(){if(!x(this.platformId))return;let t=this.currentData;if(!t||t===null||t.length<1)return;let r=N(this.elementRef.nativeElement);if(!r||r===null)return;r.select("svg").remove();let s=getComputedStyle(this.elementRef.nativeElement),B=s.getPropertyValue("--sparkline-gradient-start-internal").trim(),T=s.getPropertyValue("--sparkline-gradient-end-internal").trim(),A=s.getPropertyValue("--sparkline-gradient-direction-internal").trim(),m=B&&T,y=s.getPropertyValue("--sparkline-interpolation-internal").trim(),P=this.elementRef.nativeElement.getBoundingClientRect(),l=P.width||K,o=P.height||Q,p=r.append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("width",l).attr("height",o).attr("viewBox",`0 0 ${l} ${o}`),O=j().range([0,l]).domain([t[0].time,t[t.length-1].time]),i,n;t[0].close!==void 0?(i=d(t,e=>e.close),n=e=>e.close):t[0].price!==void 0?(i=d(t,e=>e.price),n=e=>e.price):t[0].bidPrice!==void 0?(i=d(t,e=>e.bidPrice),n=e=>e.bidPrice):(i=d(t,e=>e.value),n=e=>e.value);let g=_().domain(i).range([o,0]);p.datum(t);let f="",v="",b="sparkline-fill",C="sparkline-stroke";if(m){let e=p.append("defs"),M=`sparkline-${Date.now()}-${Math.random().toString(36).slice(2)}`;f=`${M}-fill-gradient`,b="sparkline-fill-gradient";let c=e.append("linearGradient").attr("id",f).attr("gradientUnits","userSpaceOnUse");v=`${M}-stroke-gradient`,C="sparkline-stroke-gradient";let h=e.append("linearGradient").attr("id",v).attr("gradientUnits","userSpaceOnUse");A==="horizontal"?(c.attr("x1",0).attr("y1",0).attr("x2",l).attr("y2",0),h.attr("x1",0).attr("y1",0).attr("x2",l).attr("y2",0)):(c.attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",o),h.attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",o)),c.append("stop").attr("offset","0%").attr("class","sparkline-gradient-start"),c.append("stop").attr("offset","100%").attr("class","sparkline-gradient-end"),h.append("stop").attr("offset","0%").attr("class","sparkline-gradient-start"),h.append("stop").attr("offset","100%").attr("class","sparkline-gradient-end")}let F=i[0],L=V().curve(w(y)).defined(e=>!isNaN(n(e))).x(e=>O(e.time)).y0(()=>g(F)).y1(e=>g(n(e))),Y=p.append("path").attr("d",L).attr("class",b);m&&Y.attr("fill",`url(#${f})`);let q=U().curve(w(y)).defined(e=>!isNaN(n(e))).x(e=>O(e.time)).y(e=>g(n(e))),H=p.append("path").attr("stroke-linejoin","round").attr("stroke-linecap","round").style("fill","none").attr("d",q).attr("class",C);m&&H.attr("stroke",`url(#${v})`)}};a.\u0275fac=function(r){return new(r||a)},a.\u0275cmp=S({type:a,selectors:[["mb-sparkline"]],inputs:{data:[1,"data"]},ngContentSelectors:J,decls:1,vars:0,template:function(r,s){r&1&&(z(),E(0))},styles:["[_nghost-%COMP%]{--sparkline-width-internal: var(--sparkline-width, var(--mat-sparkline-width, 160px));--sparkline-height-internal: var(--sparkline-height, var(--mat-sparkline-height, 24px));--sparkline-min-width-internal: var(--sparkline-min-width, var(--mat-sparkline-min-width, auto));--sparkline-max-width-internal: var(--sparkline-max-width, var(--mat-sparkline-max-width, none));--sparkline-min-height-internal: var(--sparkline-min-height, var(--mat-sparkline-min-height, auto));--sparkline-max-height-internal: var(--sparkline-max-height, var(--mat-sparkline-max-height, none));--sparkline-stroke-width-internal: var(--sparkline-stroke-width, var(--mat-sparkline-stroke-width, 0));--sparkline-stroke-color-internal: var(--sparkline-stroke-color, var(--mat-sparkline-stroke-color, steelblue));--sparkline-fill-color-internal: var(--sparkline-fill-color, var(--mat-sparkline-fill-color, steelblue));--sparkline-interpolation-internal: var(--sparkline-interpolation, var(--mat-sparkline-interpolation, linear));--sparkline-gradient-start-internal: var(--sparkline-gradient-start, var(--mat-sparkline-gradient-start));--sparkline-gradient-end-internal: var(--sparkline-gradient-end, var(--mat-sparkline-gradient-end));--sparkline-gradient-direction-internal: var(--sparkline-gradient-direction, var(--mat-sparkline-gradient-direction, vertical));display:inline-block;width:var(--sparkline-width-internal);height:var(--sparkline-height-internal);min-width:var(--sparkline-min-width-internal);max-width:var(--sparkline-max-width-internal);min-height:var(--sparkline-min-height-internal);max-height:var(--sparkline-max-height-internal)}[_nghost-%COMP%]     .sparkline-fill{fill:var(--sparkline-fill-color-internal)}[_nghost-%COMP%]     .sparkline-stroke{stroke:var(--sparkline-stroke-color-internal);stroke-width:var(--sparkline-stroke-width-internal)}[_nghost-%COMP%]     .sparkline-stroke-gradient{stroke-width:var(--sparkline-stroke-width-internal)}[_nghost-%COMP%]     .sparkline-gradient-start{stop-color:var(--sparkline-gradient-start-internal)}[_nghost-%COMP%]     .sparkline-gradient-end{stop-color:var(--sparkline-gradient-end-internal)}"],changeDetection:0});let k=a;return k})();export{ie as a};
