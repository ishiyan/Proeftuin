import{a as x}from"./chunk-M2DMPW5Q.js";import{a as _}from"./chunk-IEKDCRBV.js";import{Ca as T,Da as L,G as E,Qa as A,X as I,b as d,k as j}from"./chunk-GDNQNY7K.js";import{o as P}from"./chunk-FM2UNIMX.js";import{Aa as R,Cc as c,Fa as M,Nb as b,Pb as B,Qb as H,Ua as N,ba as f,gb as S,la as D,qb as W,zc as k}from"./chunk-OH5MFEO2.js";import{a as v}from"./chunk-VOSPIT4N.js";A();var F=["*"],q=160,z=24,X=(()=>{let s=class s{constructor(){this.elementRef=f(R),this.document=f(D),this.platformId=f(M),this.width=c(q),this.height=c(z),this.currentConfiguration={fillColor:"steelblue",strokeColor:void 0,strokeWidth:1,interpolation:"linear"},this.configuration=c.required(),this.data=c.required(),k(()=>{let t=this.configuration();this.currentConfiguration=v(v({},this.currentConfiguration),t),this.render()}),k(()=>{this.currentData=this.data(),this.render()}),W({write:()=>{this.render()}})}render(){if(!P(this.platformId)||!this.document||this.document===null)return;let t=this.currentData;if(!t||t===null||t.length<1)return;let n=j(this.elementRef.nativeElement);if(!n||n===null)return;n.select("svg").remove();let i=this.currentConfiguration,u=_(this.elementRef,this.width(),this.height(),q,z),p=u[0],m=u[1],g=n.append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("width",p).attr("height",m).attr("viewBox",`0 0 ${p} ${m}`),w=I().range([0,p]).domain([t[0].time,t[t.length-1].time]),a,o;t[0].close!==void 0?(a=d(t,e=>e.close),o=e=>e.close):t[0].price!==void 0?(a=d(t,e=>e.price),o=e=>e.price):t[0].bidPrice!==void 0?(a=d(t,e=>e.bidPrice),o=e=>e.bidPrice):(a=d(t,e=>e.value),o=e=>e.value);let y=i.interpolation?i.interpolation:"linear;",C=E().domain(a).range([m,0]);if(g.datum(t),i.fillColor&&i.fillColor!=="none"){let e=a[0],r=L().curve(x(y)).defined(l=>!isNaN(o(l))).x(l=>w(l.time)).y0(()=>C(e)).y1(l=>C(o(l)));g.append("path").attr("fill",i.fillColor).attr("d",r)}if(i.strokeColor&&i.strokeWidth&&i.strokeWidth>0&&i.strokeColor!=="none"){let e=T().curve(x(y)).defined(r=>!isNaN(o(r))).x(r=>w(r.time)).y(r=>C(o(r)));g.append("path").attr("stroke-width",i.strokeWidth).attr("stroke",i.strokeColor).attr("stroke-linejoin","round").attr("stroke-linecap","round").style("fill","none").attr("d",e)}}};s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=S({type:s,selectors:[["mb-sparkline"]],hostBindings:function(n,i){n&1&&b("resize",function(){return i.render()},N)},inputs:{width:[1,"width"],height:[1,"height"],configuration:[1,"configuration"],data:[1,"data"]},ngContentSelectors:F,decls:1,vars:0,template:function(n,i){n&1&&(B(),H(0))},encapsulation:2,changeDetection:0});let h=s;return h})();export{X as a};
