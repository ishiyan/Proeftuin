import{a as ee}from"./chunk-5HEUTZMI.js";import{a as V,b as H,c as X,f as U}from"./chunk-4UKE57IE.js";import{a as G,b as W,d as Z}from"./chunk-MHQ4FOK4.js";import{f as Y}from"./chunk-TTDD7BST.js";import{a as B}from"./chunk-YTT2JQB3.js";import{o as S}from"./chunk-QQ6YFGSV.js";import{Ca as z,Cb as C,Db as J,Fb as P,Gb as A,Ha as O,Hb as q,Ib as h,Jb as m,Jc as M,Kb as c,Lb as x,Mc as s,Nc as T,Pc as Q,Sb as L,Wb as R,Ya as o,Yb as u,Z as j,ca as p,ec as y,fc as D,gc as b,ha as I,ia as K,ib as g,kb as F,kc as l,lc as w,na as k,ta as _,za as N}from"./chunk-54YCK6MI.js";var te="MathJax-script",ie=(()=>{let t=class t{constructor(){this.document=p(k),this.platformId=p(O),this.config=p(B),this.mathJaxLoadingPromise=this.loadMathJax(this.config).catch(e=>{console.error("MathJax failed to load",e)})}render(e,i){this.mathJaxLoadingPromise.then(()=>{if(t.isMathJax(e)){let n=t.fixMathJaxBugs(e);i.innerHTML=`<span class='jax-process'>${n}</span>`,window.MathJax.startup.promise.then(()=>{window.MathJax.typesetPromise([i]).catch(f=>console.error("MathJax typeset failed: "+f.message))})}else i.innerHTML=e})}static isMathJax(e){return!!e?.match(/(?:\$|\\\(|\\\[|\\begin\{.*?})/)}static fixMathJaxBugs(e){return e.replace(/<br \/>/gi,"<br/> ").replace(/[$]([\s\S]+?)[$]/gi,(i,n,f,v)=>n.includes("\\\\")&&!n.includes("\\begin")?`$\\begin{align*}${n}\\end{align*}$`:`$${n}$`)}isMathJaxLoaded(){return!S(this.platformId)||!this.document||this.document===null?!1:!!document.getElementById(te)}async loadMathJax(e){return!S(this.platformId)||!this.document||this.document===null?Promise.reject("No document object"):this.isMathJaxLoaded()?Promise.resolve("MathJax already loaded"):new Promise((i,n)=>{let f={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],packages:["base","require","ams"]},svg:{fontCache:"global"}},v=document.createElement("script");v.type="text/javascript",v.text=`MathJax = ${JSON.stringify(f)}`,document.head.appendChild(v);let r=document.createElement("script");r.id=te,r.type="text/javascript",r.async=!0,e.online?r.src=`https://cdn.jsdelivr.net/npm/mathjax@${e.version}/es5/${e.config}.js`:r.src=`assets/mathjax/es5/${e.config}.js`,r.onload=()=>{i("MathJax loaded")},r.onerror=()=>{n("Error loading MathJax")},document.head.appendChild(r)})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275prov=j({token:t,factory:t.\u0275fac,providedIn:"root"});let a=t;return a})();var E=(()=>{let t=class t{constructor(){this.mathJaxService=p(ie),this.element=p(z),this.mbMathJax=s(),M(()=>{let e=this.mbMathJax();e&&(console.log("directive effect:",e),this.render(e))})}ngOnChanges(e){let i=e.mbMathJax;if(console.log("directive changes 0:",i),!i)return;let n=i.currentValue;console.log("directive changes 1:",n),this.render(n)}render(e){this.mathJaxService.render(e,this.element.nativeElement)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275dir=F({type:t,selectors:[["","mbMathJax",""]],inputs:{mbMathJax:[1,"mbMathJax"]},features:[N]});let a=t;return a})();var ae=(()=>{let t=class t{constructor(){this.expression=s.required(),this.mathJaxDirective=T.required(E),M(()=>{let e=this.expression();this.mathJaxDirective().render(e)})}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=g({type:t,selectors:[["mb-mathjax"]],viewQuery:function(i,n){i&1&&y(n.mathJaxDirective,E,5),i&2&&D()},inputs:{expression:[1,"expression"]},decls:2,vars:1,consts:[[3,"mbMathJax"]],template:function(i,n){i&1&&(m(0,"span",0),l(1),c()),i&2&&(o(),w(n.expression()))},dependencies:[E],encapsulation:2,changeDetection:0});let a=t;return a})();var oe=["autosize"];function se(a,t){if(a&1&&(m(0,"div"),l(1," MathJax display: "),x(2,"mb-mathjax",4),c()),a&2){let d=u();o(2),h("expression",d.displayExpression())}}function re(a,t){if(a&1&&(m(0,"div"),l(1," KaTeX display: "),x(2,"mb-katex",5),c()),a&2){let d=u(),e=b(7);o(2),h("expression",e.value)("options",d.katexDisplayOptions)}}function ce(a,t){if(a&1&&(m(0,"div"),l(1," MathJax inline: "),x(2,"mb-mathjax",4),c()),a&2){let d=u();o(2),h("expression",d.inlineExpression())}}function de(a,t){if(a&1&&(m(0,"div"),l(1," KaTeX inline: "),x(2,"mb-katex",5),c()),a&2){let d=u(),e=b(7);o(2),h("expression",e.value)("options",d.katexInlineOptions)}}var ne=(()=>{let t=class t{constructor(){this.changeDetectionRef=p(Q),this.autosize=T.required("autosize"),this.sample=s.required(),this.showMathJax=s(!0),this.showKatex=s(!0),this.displayExpression=_(""),this.inlineExpression=_(""),this.katexDisplayOptions={displayMode:!0,throwOnError:!1,strict:!0},this.katexInlineOptions={displayMode:!1,throwOnError:!1,strict:!0},M(()=>{let e=this.sample().code;this.updateMathJax(e)})}ngAfterViewChecked(){this.autosize().resizeToFitContent(!0),this.changeDetectionRef.detectChanges()}updateMathJax(e){this.displayExpression.set("$$"+e+"$$"),this.inlineExpression.set("$"+e+"$")}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=g({type:t,selectors:[["app-tex-sample-card"]],viewQuery:function(i,n){i&1&&y(n.autosize,oe,5),i&2&&D()},inputs:{sample:[1,"sample"],showMathJax:[1,"showMathJax"],showKatex:[1,"showKatex"]},decls:14,vars:6,consts:[["source","","autosize","cdkTextareaAutosize"],["appearance","outlined",1,"tex-card","mat-elevation-z4"],[1,"tex-card-full-width"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","100",1,"tex-card-textarea",3,"input"],[3,"expression"],[3,"expression","options"]],template:function(i,n){if(i&1){let f=L();m(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title"),l(3),c()(),m(4,"mat-card-content")(5,"mat-form-field",2)(6,"textarea",3,0),R("input",function(){I(f);let r=b(7);return K(n.updateMathJax(r.value))}),l(9),c()(),C(10,se,3,1,"div"),C(11,re,3,2,"div"),C(12,ce,3,1,"div"),C(13,de,3,2,"div"),c()()}i&2&&(o(3),w(n.sample().name),o(6),w(n.sample().code),o(),J(n.showMathJax()?10:-1),o(),J(n.showKatex()?11:-1),o(),J(n.showMathJax()?12:-1),o(),J(n.showKatex()?13:-1))},dependencies:[V,U,H,X,Z,Y,W,G,ae,ee],styles:[".tex-card[_ngcontent-%COMP%]{margin-bottom:8px}.tex-card-full-width[_ngcontent-%COMP%]{width:100%}"],changeDetection:0});let a=t;return a})();function pe(a,t){if(a&1&&x(0,"app-tex-sample-card",0),a&2){let d=t.$implicit,e=u();h("sample",d)("showMathJax",e.showMathJax())("showKatex",e.showKatex())}}var Ae=(()=>{let t=class t{constructor(){this.samples=s.required(),this.showMathJax=s(!0),this.showKatex=s(!0)}};t.\u0275fac=function(i){return new(i||t)},t.\u0275cmp=g({type:t,selectors:[["app-tex-sample-list"]],inputs:{samples:[1,"samples"],showMathJax:[1,"showMathJax"],showKatex:[1,"showKatex"]},decls:2,vars:0,consts:[[3,"sample","showMathJax","showKatex"]],template:function(i,n){i&1&&A(0,pe,1,3,"app-tex-sample-card",0,P),i&2&&q(n.samples())},dependencies:[ne],encapsulation:2,changeDetection:0});let a=t;return a})();export{Ae as a};
