import{a as j}from"./chunk-VCPLHJPF.js";import{a as w,b as O}from"./chunk-VBEFUZLU.js";import{a as b,b as z}from"./chunk-UDFZ6LG4.js";import{b as Q}from"./chunk-Q7D5BR5C.js";import{a as I}from"./chunk-MSNUXT5M.js";import{d as N}from"./chunk-MHQ4FOK4.js";import{a as B,f as H}from"./chunk-TTDD7BST.js";import{b as V,g as v,i as q,j as F,l as E,m as W,r as D}from"./chunk-DWBMJQLS.js";import{Cb as c,Db as d,Ib as C,Jb as r,Jc as x,Kb as s,Lc as S,Mc as T,Sb as f,Wb as P,Ya as p,Yb as m,ha as l,ia as g,ib as M,kc as _,pc as L,qc as u,rc as A}from"./chunk-54YCK6MI.js";import{a as o}from"./chunk-VOSPIT4N.js";function G(n,h){if(n&1){let i=f();r(0,"mb-hilbert-transformer-cycle-estimator-params",4),P("selectionChange",function(e){l(i);let a=m();return g(a.estimatorParamsParam=e)}),s()}if(n&2){let i=m();C("initial",i.estimatorParamsParam)}}function J(n,h){if(n&1){let i=f();r(0,"mat-form-field",5)(1,"mat-label"),_(2,"Fast \u2113"),s(),r(3,"input",6),A("ngModelChange",function(e){l(i);let a=m();return u(a.fastLengthParam,e)||(a.fastLengthParam=e),g(e)}),s()(),r(4,"mat-form-field",5)(5,"mat-label"),_(6,"Slow \u2113"),s(),r(7,"input",6),A("ngModelChange",function(e){l(i);let a=m();return u(a.slowLengthParam,e)||(a.slowLengthParam=e),g(e)}),s()()}if(n&2){let i=m();p(3),L("ngModel",i.fastLengthParam),p(4),L("ngModel",i.slowLengthParam)}}function K(n,h){if(n&1){let i=f();r(0,"mat-form-field",5)(1,"mat-label"),_(2,"Fast \u03B1"),s(),r(3,"input",7),A("ngModelChange",function(e){l(i);let a=m();return u(a.fastAlphaParam,e)||(a.fastAlphaParam=e),g(e)}),s()(),r(4,"mat-form-field",5)(5,"mat-label"),_(6,"Slow \u03B1"),s(),r(7,"input",7),A("ngModelChange",function(e){l(i);let a=m();return u(a.slowAlphaParam,e)||(a.slowAlphaParam=e),g(e)}),s()()}if(n&2){let i=m();p(3),L("ngModel",i.fastAlphaParam),p(4),L("ngModel",i.slowAlphaParam)}}function R(n,h){if(n&1){let i=f();r(0,"mb-bar-component",8),P("selectionChange",function(e){l(i);let a=m();return g(a.barComponentChanged(e))}),s()}if(n&2){let i=m();C("initial",i.barComponent)}}function U(n,h){if(n&1){let i=f();r(0,"mb-quote-component",8),P("selectionChange",function(e){l(i);let a=m();return g(a.quoteComponentChanged(e))}),s()}if(n&2){let i=m();C("initial",i.quoteComponent)}}var X=n=>"fastLimitLength"in n,gt=(()=>{let h=class h{get estimatorTypeParam(){return this.paramsLength.estimatorType||w.HomodyneDiscriminator}set estimatorTypeParam(t){this.paramsAlpha.estimatorType===t&&this.paramsLength.estimatorType===t||(this.paramsAlpha.estimatorType=t,this.paramsAlpha=o({},this.paramsAlpha),this.paramsLength.estimatorType=t,this.paramsLength=o({},this.paramsLength),this.notify())}estimatorTypeChanged(t){this.estimatorTypeParam=t}get estimatorParamsParam(){return this.estimatorParams}set estimatorParamsParam(t){this.paramsAlpha.estimatorParams=t,this.paramsAlpha=o({},this.paramsAlpha),this.paramsLength.estimatorParams=t,this.paramsLength=o({},this.paramsLength),this.estimatorParams=t,this.notify()}get fastLengthParam(){return this.paramsLength.fastLimitLength}set fastLengthParam(t){(!t||t<2)&&(t=2);let e=2/(t+1);e=e<1e-4?1e-4:e,e=e>1?1:e,!(this.paramsAlpha.fastLimitSmoothingFactor===e&&this.paramsLength.fastLimitLength===t)&&(this.paramsAlpha.fastLimitSmoothingFactor=e,this.paramsAlpha=o({},this.paramsAlpha),this.paramsLength.fastLimitLength=t,this.paramsLength=o({},this.paramsLength),this.notify())}get slowLengthParam(){return this.paramsLength.slowLimitLength}set slowLengthParam(t){(!t||t<2)&&(t=2);let e=2/(t+1);e=e<1e-4?1e-4:e,e=e>1?1:e,!(this.paramsAlpha.slowLimitSmoothingFactor===e&&this.paramsLength.slowLimitLength===t)&&(this.paramsAlpha.slowLimitSmoothingFactor=e,this.paramsAlpha=o({},this.paramsAlpha),this.paramsLength.slowLimitLength=t,this.paramsLength=o({},this.paramsLength),this.notify())}get useAlpha(){return this.useAlphaInternal}set useAlpha(t){this.useAlphaInternal!==t&&(this.useAlphaInternal=t,this.useAlphaInternal?(this.paramsAlpha=o({},this.paramsAlpha),this.notify()):(this.paramsLength=o({},this.paramsLength),this.notify()))}get fastAlphaParam(){return this.paramsAlpha.fastLimitSmoothingFactor}set fastAlphaParam(t){(!t||t>1)&&(t=1);let e=2/t-1;e=e<2?2:e,e=e>1024?1024:e,!(this.paramsAlpha.fastLimitSmoothingFactor===t&&this.paramsLength.fastLimitLength===e)&&(this.paramsLength.fastLimitLength=e,this.paramsAlpha.fastLimitSmoothingFactor=t,this.paramsAlpha=o({},this.paramsAlpha),this.notify())}get slowAlphaParam(){return this.paramsAlpha.slowLimitSmoothingFactor}set slowAlphaParam(t){(!t||t>1)&&(t=1);let e=2/t-1;e=e<2?2:e,e=e>1024?1024:e,!(this.paramsAlpha.slowLimitSmoothingFactor===t&&this.paramsLength.slowLimitLength===e)&&(this.paramsLength.slowLimitLength=e,this.paramsAlpha.slowLimitSmoothingFactor=t,this.paramsAlpha=o({},this.paramsAlpha),this.notify())}constructor(){this.initialized=!1,this.useAlphaInternal=!1,this.paramsLength={fastLimitLength:3,slowLimitLength:39,estimatorType:w.HomodyneDiscriminator,barComponent:b.Close},this.paramsAlpha={fastLimitSmoothingFactor:.5,slowLimitSmoothingFactor:.05,estimatorType:w.HomodyneDiscriminator,barComponent:b.Close},this.barComponentVisible=this.barComponent!==void 0,this.quoteComponentVisible=this.quoteComponent!==void 0,this.estimatorParams={smoothingLength:3,alphaEmaQuadratureInPhase:.3,alphaEmaPeriod:.3},this.estimatorParamsVisible=!1,this.selectionChange=S(),this.initial=T.required(),x(()=>{let t=this.initial();X(t)?(this.useAlpha=!1,this.paramsLength=t,this.slowLengthParam=t.slowLimitLength,this.fastLengthParam=t.fastLimitLength):(this.useAlpha=!0,this.paramsAlpha=t,this.slowAlphaParam=t.slowLimitSmoothingFactor,this.fastAlphaParam=t.fastLimitSmoothingFactor),this.estimatorTypeParam=t.estimatorType||w.HomodyneDiscriminator,t.estimatorParams&&(this.estimatorParams=t.estimatorParams,this.estimatorParamsVisible=!0,this.estimatorParamsParam=t.estimatorParams),this.paramsLength.barComponent=t.barComponent,this.paramsAlpha.barComponent=t.barComponent,this.barComponent=t.barComponent,this.paramsLength.quoteComponent=t.quoteComponent,this.paramsAlpha.quoteComponent=t.quoteComponent,this.quoteComponent=t.quoteComponent,this.barComponentVisible=t.barComponent!==void 0,this.quoteComponentVisible=t.quoteComponent!==void 0})}ngAfterContentInit(){this.initialized=!0,this.notify()}barComponentChanged(t){this.paramsLength.barComponent=t,this.paramsAlpha.barComponent=t,this.paramsLength=o({},this.paramsLength),this.paramsAlpha=o({},this.paramsAlpha),this.notify()}quoteComponentChanged(t){this.paramsLength.quoteComponent=t,this.paramsAlpha.quoteComponent=t,this.paramsLength=o({},this.paramsLength),this.paramsAlpha=o({},this.paramsAlpha),this.notify()}notify(){this.initialized&&(this.useAlpha?this.selectionChange.emit(this.paramsAlpha):this.selectionChange.emit(this.paramsLength))}};h.\u0275fac=function(e){return new(e||h)},h.\u0275cmp=M({type:h,selectors:[["mb-mesa-adaptive-moving-average-params"]],inputs:{initial:[1,"initial"]},outputs:{selectionChange:"selectionChange"},decls:8,vars:9,consts:[[1,"mr",3,"selectionChange","initial","label"],[3,"initial"],[1,"mr",3,"ngModelChange","color","ngModel"],[1,"mr",3,"initial"],[3,"selectionChange","initial"],["appearance","fill","floatLabel","always",1,"mr",2,"width","6em"],["type","number","matInput","","min","2","max","1024","step","1",3,"ngModelChange","ngModel"],["type","number","matInput","","min","0.001","max","0.999","step","0.001",3,"ngModelChange","ngModel"],[1,"mr",3,"selectionChange","initial"]],template:function(e,a){e&1&&(r(0,"mb-hilbert-transformer-cycle-estimator-type",0),P("selectionChange",function(y){return a.estimatorTypeChanged(y)}),s(),c(1,G,1,1,"mb-hilbert-transformer-cycle-estimator-params",1),r(2,"mat-slide-toggle",2),A("ngModelChange",function(y){return u(a.useAlpha,y)||(a.useAlpha=y),y}),_(3,"Alpha"),s(),c(4,J,8,2),c(5,K,8,2),c(6,R,1,1,"mb-bar-component",3),c(7,U,1,1,"mb-quote-component",3)),e&2&&(C("initial",a.estimatorTypeParam)("label","Estimator"),p(),d(a.estimatorParamsVisible?1:-1),p(),C("color","primary"),L("ngModel",a.useAlpha),p(2),d(a.useAlpha?-1:4),p(),d(a.useAlpha?5:-1),p(),d(a.barComponentVisible?6:-1),p(),d(a.quoteComponentVisible?7:-1))},dependencies:[D,V,F,v,W,E,q,H,B,N,I,O,j,z,Q],styles:[".mr[_ngcontent-%COMP%]{margin-right:.55em}"],changeDetection:0});let n=h;return n})();export{gt as a};
