import{a as D}from"./chunk-3H6C7N3C.js";import{a as _}from"./chunk-IEKDCRBV.js";import{Ca as T,Da as L,G as E,Qa as A,X as I,b as c,k as j}from"./chunk-GXN2U6XA.js";import{o as P}from"./chunk-QQ6YFGSV.js";import{Ca as M,Ha as N,Jc as k,Mc as l,Wa as b,Wb as W,Zb as B,_b as H,ca as f,ib as R,na as y,tb as S}from"./chunk-54YCK6MI.js";import{a as C}from"./chunk-VOSPIT4N.js";A();var F=["*"],q=160,z=24,X=(()=>{let s=class s{constructor(){this.elementRef=f(M),this.document=f(y),this.platformId=f(N),this.width=l(q),this.height=l(z),this.currentConfiguration={fillColor:"steelblue",strokeColor:void 0,strokeWidth:1,interpolation:"linear"},this.configuration=l.required(),this.data=l.required(),k(()=>{let e=this.configuration();this.currentConfiguration=C(C({},this.currentConfiguration),e),this.render()}),k(()=>{this.currentData=this.data(),this.render()}),S({write:()=>{this.render()}})}render(){if(!P(this.platformId)||!this.document||this.document===null)return;let e=this.currentData;if(!e||e===null||e.length<1)return;let n=j(this.elementRef.nativeElement);if(!n||n===null)return;n.select("svg").remove();let i=this.currentConfiguration,u=_(this.elementRef,this.width(),this.height(),q,z),m=u[0],p=u[1],g=n.append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("width",m).attr("height",p).attr("viewBox",`0 0 ${m} ${p}`),w=I().range([0,m]).domain([e[0].time,e[e.length-1].time]),a,o;e[0].close!==void 0?(a=c(e,t=>t.close),o=t=>t.close):e[0].price!==void 0?(a=c(e,t=>t.price),o=t=>t.price):e[0].bidPrice!==void 0?(a=c(e,t=>t.bidPrice),o=t=>t.bidPrice):(a=c(e,t=>t.value),o=t=>t.value);let x=i.interpolation?i.interpolation:"linear;",v=E().domain(a).range([p,0]);if(g.datum(e),i.fillColor&&i.fillColor!=="none"){let t=a[0],r=L().curve(D(x)).defined(d=>!isNaN(o(d))).x(d=>w(d.time)).y0(()=>v(t)).y1(d=>v(o(d)));g.append("path").attr("fill",i.fillColor).attr("d",r)}if(i.strokeColor&&i.strokeWidth&&i.strokeWidth>0&&i.strokeColor!=="none"){let t=T().curve(D(x)).defined(r=>!isNaN(o(r))).x(r=>w(r.time)).y(r=>v(o(r)));g.append("path").attr("stroke-width",i.strokeWidth).attr("stroke",i.strokeColor).attr("stroke-linejoin","round").attr("stroke-linecap","round").style("fill","none").attr("d",t)}}};s.\u0275fac=function(n){return new(n||s)},s.\u0275cmp=R({type:s,selectors:[["mb-sparkline"]],hostBindings:function(n,i){n&1&&W("resize",function(){return i.render()},b)},inputs:{width:[1,"width"],height:[1,"height"],configuration:[1,"configuration"],data:[1,"data"]},ngContentSelectors:F,decls:1,vars:0,template:function(n,i){n&1&&(B(),H(0))},encapsulation:2,changeDetection:0});let h=s;return h})();export{X as a};
