import{a as H}from"./chunk-TY2JD5CE.js";import{j as Y,m as E}from"./chunk-2ZUOBA3K.js";import{a as I}from"./chunk-3663PBMO.js";import{Ab as y,Bb as x,Kb as l,Kc as a,Lb as d,Lc as o,Mb as h,Mc as R,Qb as k,Rb as M,Vb as O,Wb as P,Xa as g,ca as p,cc as _,dc as w,fc as S,ha as m,hc as V,ia as f,ib as b,ja as C,jc as D,kc as N,sa as c,zb as v}from"./chunk-VOP6QBU4.js";var X=["trigger"];function T(s,n){if(s&1&&(l(0,"span",3),D(1),d()),s&2){let z=P();g(),N(z.currentHex())}}var L=(()=>{let n=class n{constructor(){this.overlay=p(Y),this.trigger=R.required("trigger"),this.overlayRef=null,this.isOpen=c(!1),this.alphaChannel=o(!1),this.diameter=o(280),this.ringWidth=o(24),this.handleSize=o(12),this.resolution=o("auto"),this.disabled=o(!1),this.hexValue=o("#ff4081"),this.backgroundColor=o("auto"),this.showValue=o(!0),this.closeOnSelect=o(!1),this.hexValueChange=a(),this.colorChange=a(),this.opened=a(),this.closed=a(),this.currentHex=c("#ff4081"),this.currentHex.set(this.hexValue())}togglePicker(){this.disabled()||(this.isOpen()?this.close():this.open())}open(){if(this.disabled()||this.isOpen())return;let r=this.createPositionStrategy();this.overlayRef=this.overlay.create({positionStrategy:r,hasBackdrop:!0,backdropClass:"color-ring-picker-backdrop",scrollStrategy:this.overlay.scrollStrategies.reposition(),disposeOnNavigation:!0});let t=new I(H),e=this.overlayRef.attach(t);e.setInput("alphaChannel",this.alphaChannel()),e.setInput("diameter",this.diameter()),e.setInput("ringWidth",this.ringWidth()),e.setInput("handleSize",this.handleSize()),e.setInput("resolution",this.resolution()),e.setInput("disabled",!1),e.setInput("hexValue",this.currentHex()),e.setInput("backgroundColor",this.backgroundColor()),e.instance.hexValueChange.subscribe(i=>{this.currentHex.set(i),this.hexValueChange.emit(i),this.closeOnSelect()&&this.close()}),e.instance.colorChange.subscribe(i=>{this.colorChange.emit(i)}),this.overlayRef.backdropClick().subscribe(()=>{this.close()}),this.overlayRef.keydownEvents().subscribe(i=>{i.key==="Escape"&&this.close()}),this.isOpen.set(!0),this.opened.emit()}close(){this.overlayRef&&(this.overlayRef.dispose(),this.overlayRef=null),this.isOpen.set(!1),this.closed.emit()}createPositionStrategy(){return this.overlay.position().flexibleConnectedTo(this.trigger()).withPositions([{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top",offsetY:8},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",offsetY:-8},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top",offsetY:8},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",offsetY:-8}]).withPush(!0).withFlexibleDimensions(!0).withViewportMargin(16)}getTriggerStyle(){return{"background-color":this.currentHex(),border:"1px solid #ccc"}}getContrastColor(r){let t=r.replace("#",""),e=parseInt(t.slice(0,2),16),i=parseInt(t.slice(2,4),16),u=parseInt(t.slice(4,6),16);return(.299*e+.587*i+.114*u)/255>.5?"#000000":"#ffffff"}};n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=b({type:n,selectors:[["mb-color-ring-picker"]],viewQuery:function(t,e){t&1&&_(e.trigger,X,5),t&2&&w()},inputs:{alphaChannel:[1,"alphaChannel"],diameter:[1,"diameter"],ringWidth:[1,"ringWidth"],handleSize:[1,"handleSize"],resolution:[1,"resolution"],disabled:[1,"disabled"],hexValue:[1,"hexValue"],backgroundColor:[1,"backgroundColor"],showValue:[1,"showValue"],closeOnSelect:[1,"closeOnSelect"]},outputs:{hexValueChange:"hexValueChange",colorChange:"colorChange",opened:"opened",closed:"closed"},decls:6,vars:7,consts:[["trigger",""],["type","button",1,"color-ring-picker-trigger",3,"click","disabled"],[1,"color-swatch"],[1,"color-value"],["viewBox","0 0 24 24","width","16","height","16",1,"dropdown-icon"],["d","M7 10l5 5 5-5z","fill","currentColor"]],template:function(t,e){if(t&1){let i=k();l(0,"button",1,0),O("click",function(){return m(i),f(e.togglePicker())}),h(2,"span",2),y(3,T,2,1,"span",3),C(),l(4,"svg",4),h(5,"path",5),d()()}t&2&&(V(e.getTriggerStyle()),S("color",e.getContrastColor(e.currentHex())),M("disabled",e.disabled()),v("aria-label","Color picker. Current color: "+e.currentHex()),g(3),x(e.showValue()?3:-1))},dependencies:[E],styles:["[_nghost-%COMP%]{display:inline-block}[_nghost-%COMP%]   .color-ring-picker-trigger[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px 12px;border:1px solid var(--mat-sys-outline-variant);border-radius:4px;background:var(--mat-sys-surface);color:var(--mat-sys-on-surface);cursor:pointer;font-family:inherit;font-size:14px;min-height:40px;min-width:120px;transition:all .2s ease-in-out}[_nghost-%COMP%]   .color-ring-picker-trigger[_ngcontent-%COMP%]:hover:not(:disabled){background:var(--mat-sys-surface-variant);border-color:var(--mat-sys-outline)}[_nghost-%COMP%]   .color-ring-picker-trigger[_ngcontent-%COMP%]:focus{outline:2px solid var(--mat-sys-primary);outline-offset:2px}[_nghost-%COMP%]   .color-ring-picker-trigger[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}[_nghost-%COMP%]   .color-ring-picker-trigger[_ngcontent-%COMP%]   .color-swatch[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:50%;margin-right:8px;border:1px solid rgba(0,0,0,.1);flex-shrink:0;background:inherit}[_nghost-%COMP%]   .color-ring-picker-trigger[_ngcontent-%COMP%]   .color-value[_ngcontent-%COMP%]{flex:1;text-align:left;font-family:Courier New,monospace;font-size:13px}[_nghost-%COMP%]   .color-ring-picker-trigger[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{margin-left:8px;flex-shrink:0;transition:transform .2s ease-in-out}[_nghost-%COMP%]   .color-ring-picker-trigger[aria-expanded=true][_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{transform:rotate(180deg)}  .color-ring-picker-backdrop{background:#00000052}"],changeDetection:0});let s=n;return s})();export{L as a};
