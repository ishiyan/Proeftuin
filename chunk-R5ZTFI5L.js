import{a as V}from"./chunk-YTT2JQB3.js";import{a as ee}from"./chunk-I36PD23A.js";import{a as G,b as W,d as Z}from"./chunk-2G26VEQD.js";import{a as N,b as H,c as X,f as U}from"./chunk-HMH3336O.js";import{f as Y}from"./chunk-F467SDXY.js";import{Aa as K,Ab as m,Ac as Q,Da as $,Fb as v,Hb as L,Ia as z,Ib as P,Ic as f,Jb as A,Kb as p,Lb as s,Mb as l,Oc as B,Qb as q,Tb as R,Vb as h,Y as S,ab as n,ca as c,cc as y,dc as w,dd as b,ec as T,fc as d,gc as g,ib as J,ja as j,ka as I,la as k,nb as u,pb as O,tb as F,za as o}from"./chunk-R5QK5SBI.js";import{i as E}from"./chunk-6NE7JDAX.js";var te="MathJax-script",ie=(()=>{class i{constructor(){this.document=c(B),this.platformId=c(z),this.config=c(V),this.mathJaxLoadingPromise=this.loadMathJax(this.config).catch(e=>{console.error("MathJax failed to load",e)})}render(e,t){this.mathJaxLoadingPromise.then(()=>{if(i.isMathJax(e)){let a=i.fixMathJaxBugs(e);t.innerHTML=`<span class='jax-process'>${a}</span>`,window.MathJax.startup.promise.then(()=>{window.MathJax.typesetPromise([t]).catch(x=>console.error("MathJax typeset failed: "+x.message))})}else t.innerHTML=e})}static isMathJax(e){return!!e?.match(/(?:\$|\\\(|\\\[|\\begin\{.*?})/)}static fixMathJaxBugs(e){return e.replace(/<br \/>/gi,"<br/> ").replace(/[$]([\s\S]+?)[$]/gi,(t,a,x,C)=>a.includes("\\\\")&&!a.includes("\\begin")?`$\\begin{align*}${a}\\end{align*}$`:`$${a}$`)}isMathJaxLoaded(){return!b(this.platformId)||!this.document||this.document===null?!1:!!document.getElementById(te)}loadMathJax(e){return E(this,null,function*(){return!b(this.platformId)||!this.document||this.document===null?Promise.reject("No document object"):this.isMathJaxLoaded()?Promise.resolve("MathJax already loaded"):new Promise((t,a)=>{let x={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],packages:["base","require","ams"]},svg:{fontCache:"global"}},C=document.createElement("script");C.type="text/javascript",C.text=`MathJax = ${JSON.stringify(x)}`,document.head.appendChild(C);let r=document.createElement("script");r.id=te,r.type="text/javascript",r.async=!0,e.online?r.src=`https://cdn.jsdelivr.net/npm/mathjax@${e.version}/es5/${e.config}.js`:r.src=`assets/mathjax/es5/${e.config}.js`,r.onload=()=>{t("MathJax loaded")},r.onerror=()=>{a("Error loading MathJax")},document.head.appendChild(r)})})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275prov=S({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var D=(()=>{class i{constructor(){this.mathJaxService=c(ie),this.element=c(K),this.mbMathJax=o(),f(()=>{let e=this.mbMathJax();e&&(console.log("directive effect:",e),this.render(e))})}ngOnChanges(e){let t=e.mbMathJax;if(console.log("directive changes 0:",t),!t)return;let a=t.currentValue;console.log("directive changes 1:",a),this.render(a)}render(e){this.mathJaxService.render(e,this.element.nativeElement)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275dir=O({type:i,selectors:[["","mbMathJax",""]],inputs:{mbMathJax:[1,"mbMathJax"]},features:[j]})}}return i})();var ae=(()=>{class i{constructor(){this.expression=o.required(),this.mathJaxDirective=J.required(D),f(()=>{let e=this.expression();this.mathJaxDirective().render(e)})}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=u({type:i,selectors:[["mb-mathjax"]],viewQuery:function(t,a){t&1&&y(a.mathJaxDirective,D,5),t&2&&w()},inputs:{expression:[1,"expression"]},decls:2,vars:1,consts:[[3,"mbMathJax"]],template:function(t,a){t&1&&(p(0,"span",0),d(1),s()),t&2&&(n(),g(a.expression()))},dependencies:[D],encapsulation:2,changeDetection:0})}}return i})();var oe=["autosize"];function re(i,M){if(i&1&&(p(0,"div"),d(1," MathJax display: "),l(2,"mb-mathjax",4),s()),i&2){let e=h();n(2),m("expression",e.displayExpression())}}function se(i,M){if(i&1&&(p(0,"div"),d(1," KaTeX display: "),l(2,"mb-katex",5),s()),i&2){let e=h(),t=T(7);n(2),m("expression",t.value)("options",e.katexDisplayOptions)}}function ce(i,M){if(i&1&&(p(0,"div"),d(1," MathJax inline: "),l(2,"mb-mathjax",4),s()),i&2){let e=h();n(2),m("expression",e.inlineExpression())}}function pe(i,M){if(i&1&&(p(0,"div"),d(1," KaTeX inline: "),l(2,"mb-katex",5),s()),i&2){let e=h(),t=T(7);n(2),m("expression",t.value)("options",e.katexInlineOptions)}}var ne=(()=>{class i{constructor(){this.changeDetectionRef=c(Q),this.autosize=J.required("autosize"),this.sample=o.required(),this.showMathJax=o(!0),this.showKatex=o(!0),this.displayExpression=$(""),this.inlineExpression=$(""),this.katexDisplayOptions={displayMode:!0,throwOnError:!1,strict:!0},this.katexInlineOptions={displayMode:!1,throwOnError:!1,strict:!0},f(()=>{let e=this.sample().code;this.updateMathJax(e)})}ngAfterViewChecked(){this.autosize().resizeToFitContent(!0),this.changeDetectionRef.detectChanges()}updateMathJax(e){this.displayExpression.set("$$"+e+"$$"),this.inlineExpression.set("$"+e+"$")}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=u({type:i,selectors:[["app-tex-sample-card"]],viewQuery:function(t,a){t&1&&y(a.autosize,oe,5),t&2&&w()},inputs:{sample:[1,"sample"],showMathJax:[1,"showMathJax"],showKatex:[1,"showKatex"]},decls:14,vars:6,consts:[["source","","autosize","cdkTextareaAutosize"],["appearance","outlined",1,"tex-card","mat-elevation-z4"],[1,"tex-card-full-width"],["matInput","","cdkTextareaAutosize","","cdkAutosizeMinRows","1","cdkAutosizeMaxRows","100",1,"tex-card-textarea",3,"input"],[3,"expression"],[3,"expression","options"]],template:function(t,a){if(t&1){let x=q();p(0,"mat-card",1)(1,"mat-card-header")(2,"mat-card-title"),d(3),s()(),p(4,"mat-card-content")(5,"mat-form-field",2)(6,"textarea",3,0),R("input",function(){I(x);let r=T(7);return k(a.updateMathJax(r.value))}),d(9),s()(),F(10,re,3,1,"div")(11,se,3,2,"div")(12,ce,3,1,"div")(13,pe,3,2,"div"),s()()}t&2&&(n(3),g(a.sample().name),n(6),g(a.sample().code),n(),v(a.showMathJax()?10:-1),n(),v(a.showKatex()?11:-1),n(),v(a.showMathJax()?12:-1),n(),v(a.showKatex()?13:-1))},dependencies:[N,U,H,X,Z,Y,W,G,ae,ee],styles:[".tex-card[_ngcontent-%COMP%]{margin-bottom:8px}.tex-card-full-width[_ngcontent-%COMP%]{width:100%}"],changeDetection:0})}}return i})();function de(i,M){if(i&1&&l(0,"app-tex-sample-card",0),i&2){let e=M.$implicit,t=h();m("sample",e)("showMathJax",t.showMathJax())("showKatex",t.showKatex())}}var qe=(()=>{class i{constructor(){this.samples=o.required(),this.showMathJax=o(!0),this.showKatex=o(!0)}static{this.\u0275fac=function(t){return new(t||i)}}static{this.\u0275cmp=u({type:i,selectors:[["app-tex-sample-list"]],inputs:{samples:[1,"samples"],showMathJax:[1,"showMathJax"],showKatex:[1,"showKatex"]},decls:2,vars:0,consts:[[3,"sample","showMathJax","showKatex"]],template:function(t,a){t&1&&P(0,de,1,3,"app-tex-sample-card",0,L),t&2&&A(a.samples())},dependencies:[ne],encapsulation:2,changeDetection:0})}}return i})();export{qe as a};
