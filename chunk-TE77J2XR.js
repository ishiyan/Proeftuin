import{a as ie}from"./chunk-VWUD3KSD.js";import"./chunk-2TGB3PLI.js";import"./chunk-FX4NC4EJ.js";import{a as U}from"./chunk-JVIRUAT2.js";import{f as X}from"./chunk-Y4NL7MD3.js";import"./chunk-P6Z6ONSU.js";import"./chunk-2LMAUIAO.js";import"./chunk-KHFN7NUB.js";import{a as V}from"./chunk-UZF2YIZM.js";import{ba as Q}from"./chunk-UCXTU5DW.js";import{Ca as ne,E as Z,G as T,H as $,Qa as I,c as j,d as B,e as y,k as M,sa as ee,u as Y,ua as L,wa as te}from"./chunk-KMPZBAPX.js";import"./chunk-XMFNCAXR.js";import{Aa as E,Jb as a,Kb as r,Lb as v,Tb as q,ab as P,ca as C,ec as o,jc as A,kc as F,lc as W,ma as S,nb as g}from"./chunk-BVFQLCWY.js";import{e as pe,g as K}from"./chunk-6NE7JDAX.js";var G=pe((de,ae)=>{"use strict";ae.exports=function(){var l=[[[0,3],[1,0],[3,1],[2,0]],[[2,1],[1,1],[3,0],[0,2]],[[2,2],[3,3],[1,2],[0,1]],[[0,0],[3,2],[1,3],[2,3]]];function u(n,e,i,s,t){return t===0?(s===1&&(e=n-1-e,i=n-1-i),[i,e]):[e,i]}return{xy2d:function(n,e,i){for(var s=0,t,m=0;--i>=0;)t=l[s][(n&1<<i?2:0)|(e&1<<i?1:0)],m=m<<2|t[0],s=t[1];return m},d2xy:function(n,e){for(var i=1<<n,s=0,t=0,m=1;m<i;m*=2){var h=1&e/2,x=1&(e^h),p=u(m,s,t,h,x);s=p[0]+m*h,t=p[1]+m*x,e/=4}return[s,t]}}}()});I();var re=K(G());var le=(()=>{class l{constructor(){this.element=C(E),this.colors=!1,this.selectedLevel="6",this.level=6,this.level10=Math.pow(2,this.level),this.level102=Math.pow(2,this.level*2),this.w=500,this.x=T().domain([0,this.level10]).range([0,this.w])}ngOnInit(){this.g=M(this.element.nativeElement).select("#d3-hilbert-curve").attr("width",this.w).attr("height",this.w).append("g"),this.line=ne().x(n=>this.x(n[0])).y(n=>this.x(n[1])),this.redraw()}selectionChanged(n){this.level=+n.value,this.level10=Math.pow(2,this.level),this.level102=Math.pow(2,this.level*2),this.redraw()}colorChanged(n){this.colors=n.checked,this.redraw()}redraw(){this.x.domain([-.5,this.level10]);let n=this.x(1)-this.x(0)+1;this.g.selectAll("path").remove(),this.g.selectAll("rect").remove();let e=y(this.level102).map(t=>re.d2xy(this.level,t)),i=this.g.selectAll("rect").data(this.colors?e:[]);i.exit().remove(),i.enter().append("rect").style("fill",(t,m)=>L(m/this.level102)).attr("x",t=>this.x(t[0]-.5)).attr("y",t=>this.x(t[1]-.5)).attr("width",n).attr("height",n);let s=this.g.selectAll("path.seg").data(y(e.length-1));s.exit().remove(),s.enter().append("path").attr("class","seg").merge(s).attr("d",t=>this.line([e[t],e[t+1]])).attr("stroke",t=>ee(t/e.length)).attr("stroke-width",1)}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=g({type:l,selectors:[["app-d3-sample-hilbert-curve"]],decls:53,vars:2,consts:[[1,"ml12px"],["placeholder","approximation level, n",3,"valueChange","selectionChange","value"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["value","6"],["value","7"],["value","8"],["value","9"],["value","10"],["value","11"],["value","12"],["value","13"],["value","14"],["value","15"],["value","16"],[1,"ml12px",3,"checkedChange","change","checked"],["id","d3-hilbert-curve",1,"ml12px"]],template:function(e,i){e&1&&(a(0,"p",0),o(1," The following represents the "),a(2,"em"),o(3,"n"),r(),o(4,"th approximation of a Hilbert curve for a square. With higher values of "),a(5,"em"),o(6,"n"),r(),o(7,`, more of the square is filled.
`),r(),a(8,"p",0),o(9,` The Hilbert curve is a mapping between 1D and 2D space that preserves locality quite well. This means that points near each other in terms of distance along the curve will also be near each other on the 2D plane.
`),r(),a(10,"p",0),o(11," For example, colours of the rainbow can be plotted such that similar colours are always near each other. Click "),a(12,"em"),o(13,"show colours"),r(),o(14,` to see a demonstration below.
`),r(),a(15,"mat-form-field",0)(16,"mat-select",1),W("valueChange",function(t){return F(i.selectedLevel,t)||(i.selectedLevel=t),t}),q("selectionChange",function(t){return i.selectionChanged(t)}),a(17,"mat-option",2),o(18,"1"),r(),a(19,"mat-option",3),o(20,"2"),r(),a(21,"mat-option",4),o(22,"3"),r(),a(23,"mat-option",5),o(24,"4"),r(),a(25,"mat-option",6),o(26,"5"),r(),a(27,"mat-option",7),o(28,"6"),r(),a(29,"mat-option",8),o(30,"7"),r(),a(31,"mat-option",9),o(32,"8"),r(),a(33,"mat-option",10),o(34,"9"),r(),a(35,"mat-option",11),o(36,"10"),r(),a(37,"mat-option",12),o(38,"11"),r(),a(39,"mat-option",13),o(40,"12"),r(),a(41,"mat-option",14),o(42,"13"),r(),a(43,"mat-option",15),o(44,"14"),r(),a(45,"mat-option",16),o(46,"15"),r(),a(47,"mat-option",17),o(48,"16"),r()()(),a(49,"mat-slide-toggle",18),W("checkedChange",function(t){return F(i.colors,t)||(i.colors=t),t}),q("change",function(t){return i.colorChanged(t)}),o(50,"show colours"),r(),v(51,"br"),S(),v(52,"svg",19)),e&2&&(P(16),A("value",i.selectedLevel),P(33),A("checked",i.colors))},dependencies:[X,ie,Q,U],styles:[".ml12px[_ngcontent-%COMP%]{margin-left:12px}"]})}}return l})();I();function z(l){let u=1,n=0,e={x:0,y:0};for(;l>0;){let i=1&l>>1,s=1&(i^l);s===0&&(i===1&&(e={x:u-1-e.x,y:u-1-e.y}),e={x:e.y,y:e.x}),e={x:e.x+u*s,y:e.y+u*i},u<<=1,l>>=2,n=(n+1)%2}return n==0&&(e={x:e.y,y:e.x}),e}var se=(()=>{class l{constructor(){this.element=C(E)}ngOnInit(){if(this.svg)return;this.svg=M(this.element.nativeElement).select("svg").attr("width",960).attr("height",530).append("g").attr("transform","translate(10,10)");let n=8,e=Math.pow(2,Math.floor(Math.log2(512/n))),i=e*e;function s(c){return c.match(/.{6}/g).map(d=>"#"+d)}let t=s("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),m=Z(t),h=0,x=0,p=[];for(;h<i;)x=3+Math.floor(100*Math.random()*Math.random()),p.push([h,h+=x]);p[p.length-1][1]=i,this.svg.append("g").selectAll("path").data(p).enter().append("path").attr("fill","transparent").attr("stroke",(c,d)=>L(d/p.length)).attr("stroke-width","8").attr("stroke-linecap","square").attr("d",c=>"M"+y(c[0],c[1]).map(d=>{let k=z(d);return[n*k.x,n*k.y]}).join("L"));let f="x",H="y";this.svg.append("path").attr("fill","transparent").attr("stroke","#fff").attr("stroke-width","1").attr("d","M"+y(e*e).map(z).map(c=>[n*c[f],n*c[H]]).join("L"));let w=this.svg.append("text").attr("y",10).attr("x",512).attr("font-size",12).style("font-family","monospace"),_=y(7).map(c=>this.svg.append("circle").attr("r",3).attr("fill","white")),O=100;Y(c=>{let d=z(c/O%i);_[Math.floor(Math.random()*_.length)].transition().duration(O).attr("cx",n*d.x).attr("cy",n*d.y),w.text(JSON.stringify(d))},O)}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=g({type:l,selectors:[["app-d3-sample-hilbert-paths"]],decls:2,vars:0,consts:[[1,"container"]],template:function(e,i){e&1&&(a(0,"div",0),S(),v(1,"svg"),r())},styles:[".container[_ngcontent-%COMP%]{margin:12px}"]})}}return l})();I();var me=K(G());var ce=(()=>{class l{constructor(){this.element=C(E)}ngOnInit(){let e=M(this.element.nativeElement).select("svg").attr("class","hilbert").attr("opacity",1).attr("width",510).attr("height",530),i=(t,m,h,x)=>{let p="open",f=x.map(b=>+b[p]),H=Math.pow(2,m/2),w=T().domain([-.5,H]).range([0,500]),D=w(1)-w(0)+1;console.log("level",m,"level2:",H,"size:",D);let _=Math.max(1e-4,B(f)??0),c=(j(f)??1)-_,d=$().domain([Math.max(1e-4,B(f)),j(f)]).range(["#00c","#f90"]);t.append("text").attr("x","5").attr("dy","1em").text("rdsa@xams");let k=t.append("g").attr("transform","translate(5,25)"),J=k.selectAll("rect").data(h);J.enter().append("rect"),J.exit().remove(),k.selectAll("rect").style("fill",(b,N)=>f[N]?te((f[N]-_)/c):"#000f").attr("x",b=>w(b[0]-.5)).attr("y",b=>w(b[1]-.5)).attr("width",D).attr("height",D)},s=14;i(e,s,V.map((t,m)=>me.d2xy(s,m)),V)}static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=g({type:l,selectors:[["app-d3-sample-hilbert-stocks"]],decls:10,vars:0,consts:[[1,"container"],["href","https://www.jasondavies.com/hilbert-stocks","target","new"]],template:function(e,i){e&1&&(a(0,"div",0)(1,"p"),o(2," Hilbert curves can be used to compress a 1D dataset into a 2D chart. In this demonstration, fifteen years of daily stock prices are plotted along Hilbert curves. Data close together in time will appear close together in 2D-space."),r(),a(3,"p"),o(4," However, it becomes almost impossible to discern the precise location of a particular point relative to the original one-dimensional scale. Blue indicates low and orange indicates high, on a logarithmic scale."),r(),a(5,"p"),o(6," Inspired by "),a(7,"a",1),o(8,"Jason Davies."),r()(),S(),v(9,"svg"),r())},styles:[".container[_ngcontent-%COMP%]{margin:12px}"]})}}return l})();var Oe=(()=>{class l{static{this.\u0275fac=function(e){return new(e||l)}}static{this.\u0275cmp=g({type:l,selectors:[["app-d3-sample-5"]],decls:5,vars:0,consts:[[1,"sample-5"]],template:function(e,i){e&1&&v(0,"app-d3-sample-hilbert-curve",0)(1,"hr")(2,"app-d3-sample-hilbert-paths",0)(3,"hr")(4,"app-d3-sample-hilbert-stocks",0)},dependencies:[le,se,ce],styles:[".sample-5[_ngcontent-%COMP%]{padding:0;margin:0}"]})}}return l})();export{Oe as Sample5Component};
