import{a as v}from"./chunk-4GQ2Y2CE.js";import{a as T}from"./chunk-IEKDCRBV.js";import{Ca as E,Da as I,G as _,Qa as z,X as j,b as c,k as P}from"./chunk-KMPZBAPX.js";import{a as B,q as H}from"./chunk-HHLKRFKR.js";import{Aa as y,Ha as D,Jc as k,Na as S,Tb as N,Vb as W,Wb as b,_a as R,ca as f,nb as M,za as l}from"./chunk-X346Y2AD.js";import{a as C}from"./chunk-6NE7JDAX.js";z();var A=["*"],L=160,q=24,V=(()=>{class d{constructor(){this.elementRef=f(y),this.document=f(B),this.platformId=f(D),this.width=l(L),this.height=l(q),this.currentConfiguration={fillColor:"steelblue",strokeColor:void 0,strokeWidth:1,interpolation:"linear"},this.configuration=l.required(),this.data=l.required(),k(()=>{let t=this.configuration();this.currentConfiguration=C(C({},this.currentConfiguration),t),this.render()}),k(()=>{this.currentData=this.data(),this.render()}),S({write:()=>{this.render()}})}render(){if(!H(this.platformId)||!this.document||this.document===null)return;let t=this.currentData;if(!t||t===null||t.length<1)return;let i=P(this.elementRef.nativeElement);if(!i||i===null)return;i.select("svg").remove();let n=this.currentConfiguration,h=T(this.elementRef,this.width(),this.height(),L,q),u=h[0],p=h[1],m=i.append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("width",u).attr("height",p).attr("viewBox",`0 0 ${u} ${p}`),x=j().range([0,u]).domain([t[0].time,t[t.length-1].time]),s,o;t[0].close!==void 0?(s=c(t,e=>e.close),o=e=>e.close):t[0].price!==void 0?(s=c(t,e=>e.price),o=e=>e.price):t[0].bidPrice!==void 0?(s=c(t,e=>e.bidPrice),o=e=>e.bidPrice):(s=c(t,e=>e.value),o=e=>e.value);let w=n.interpolation?n.interpolation:"linear;",g=_().domain(s).range([p,0]);if(m.datum(t),n.fillColor&&n.fillColor!=="none"){let e=s[0],r=I().curve(v(w)).defined(a=>!isNaN(o(a))).x(a=>x(a.time)).y0(()=>g(e)).y1(a=>g(o(a)));m.append("path").attr("fill",n.fillColor).attr("d",r)}if(n.strokeColor&&n.strokeWidth&&n.strokeWidth>0&&n.strokeColor!=="none"){let e=E().curve(v(w)).defined(r=>!isNaN(o(r))).x(r=>x(r.time)).y(r=>g(o(r)));m.append("path").attr("stroke-width",n.strokeWidth).attr("stroke",n.strokeColor).attr("stroke-linejoin","round").attr("stroke-linecap","round").style("fill","none").attr("d",e)}}static{this.\u0275fac=function(i){return new(i||d)}}static{this.\u0275cmp=M({type:d,selectors:[["mb-sparkline"]],hostBindings:function(i,n){i&1&&N("resize",function(){return n.render()},!1,R)},inputs:{width:[1,"width"],height:[1,"height"],configuration:[1,"configuration"],data:[1,"data"]},ngContentSelectors:A,decls:1,vars:0,template:function(i,n){i&1&&(W(),b(0))},encapsulation:2,changeDetection:0})}}return d})();export{V as a};
