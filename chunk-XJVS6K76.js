import{a as Y}from"./chunk-IEKDCRBV.js";import{a as z,b as k}from"./chunk-XP5Z4VRE.js";import{Qa as te,k as q}from"./chunk-I7MJ6SML.js";import{a as X,f as $}from"./chunk-F467SDXY.js";import{Z as U}from"./chunk-X7C3JSFP.js";import{Aa as y,Ab as h,Gc as G,Ia as I,Ib as T,Ic as m,Jb as H,Kb as p,Lb as d,Mb as x,Na as E,Oc as N,Tb as C,Vb as D,Wb as b,Xb as M,Yc as O,_a as W,ab as c,ca as f,dd as j,fc as L,gc as R,kc as F,lc as A,mc as B,nb as S,ya as v,za as r}from"./chunk-R5QK5SBI.js";te();var se=["*"],J=64,K=24,Q=(()=>{class s{constructor(){this.elementRef=f(y),this.document=f(N),this.platformId=f(I),this.width=r(J),this.height=r(K),this.colors=r.required(),this.currentColors=G(()=>{let e=this.colors();return e?.length?e:[]}),m(()=>{this.currentColors(),this.width(),this.height(),this.render()}),E({write:()=>{this.render()}})}render(){if(!j(this.platformId)||!this.document||this.document===null)return;let e=this.elementRef.nativeElement;if(!e||e===null)return;let t=q(e);t.select("svg").remove();let i=this.currentColors(),l=i.length;if(l<1)return;let n=Y(this.elementRef,this.width(),this.height(),J,K),o=n[0],a=n[1],_=o/l,g=t.append("svg").attr("preserveAspectRatio","xMinYMin meet").attr("width",o).attr("height",a).attr("viewBox",`0 0 ${o} ${a}`);for(let u=0;u<l;++u)g.append("rect").attr("x",_*u).attr("y","0").attr("width",_).attr("height",a).attr("fill",i[u])}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=S({type:s,selectors:[["mb-swatches"]],hostBindings:function(t,i){t&1&&C("resize",function(){return i.render()},!1,W)},inputs:{width:[1,"width"],height:[1,"height"],colors:[1,"colors"]},ngContentSelectors:se,decls:1,vars:0,template:function(t,i){t&1&&(b(),M(0))},encapsulation:2,changeDetection:0})}}return s})();var ne=(s,P)=>P.id;function oe(s,P){if(s&1&&(p(0,"mat-option",3),x(1,"mb-swatches",2),d()),s&2){let e=P.$implicit,t=D();h("value",e),c(),h("width",t.optionWidthPixels)("height",t.optionHeightPixels)("colors",e.palette)}}var V=48,Z=24,ee=24,w=1;function le(s){return s===1e3?0:1e3}var ve=(()=>{class s{constructor(){this.selected=r(0),this.colors=r.required(),this.label=r("Select colors"),this.selectionChange=v(),this.optionHeightPixels=ee,this.triggerHeightPixels=Z,this.optionWidthPixels=ee*w,this.triggerWidthPixels=Z*w,this.selectWidthPixels=V+this.triggerWidthPixels,this.palettes={id:0,palettes:[],[Symbol.iterator]:function(){return this.palettes[Symbol.iterator]()}},this.selectedPalette={id:0,palette:[]},this.selectedIndex=0,m(()=>{let e=this.selected();this.selectedIndex=e;let t=this.palettes.palettes.length;t>0&&(e>=t&&(e=t-1),this.selectedIndex=e,this.selectedPalette=this.palettes.palettes[this.selectedIndex],this.selectionChange.emit(this.selectedPalette.palette))}),m(()=>{let e=this.colors(),t=le(this.palettes.id),i={id:t,palettes:[],[Symbol.iterator]:function(){return this.palettes[Symbol.iterator]()}};e.forEach((n,o)=>{i.palettes.push({id:t+o,palette:n})});let l=i.palettes.length;if(l>0){let n=this.selectedIndex;n>=l&&(n=l-1);let o=0;for(let a=0;a<l;++a){let g=e[a].length;o<g&&(o=g)}o<w&&(o=w),this.optionWidthPixels=o*this.optionHeightPixels,this.triggerWidthPixels=o*this.triggerHeightPixels,this.selectWidthPixels=V+this.triggerWidthPixels,this.palettes=i,this.selectedPalette=i.palettes[n],this.selectedIndex=n,this.selectionChange.emit(this.selectedPalette.palette)}})}selectionChanged(e){this.selectedIndex=this.palettes.palettes.indexOf(e.value),this.selectionChange.emit(e.value.palette)}computeWidthStyle(){return{width:`${this.selectWidthPixels}px`}}static{this.\u0275fac=function(t){return new(t||s)}}static{this.\u0275cmp=S({type:s,selectors:[["mb-swatches-select"]],inputs:{selected:[1,"selected"],colors:[1,"colors"],label:[1,"label"]},outputs:{selectionChange:"selectionChange"},decls:8,vars:6,consts:[[3,"ngStyle"],[3,"valueChange","selectionChange","value"],[3,"width","height","colors"],[3,"value"]],template:function(t,i){t&1&&(p(0,"mat-form-field",0)(1,"mat-label"),L(2),d(),p(3,"mat-select",1),B("valueChange",function(n){return A(i.selectedPalette,n)||(i.selectedPalette=n),n}),C("selectionChange",function(n){return i.selectionChanged(n)}),p(4,"mat-select-trigger"),x(5,"mb-swatches",2),d(),T(6,oe,2,4,"mat-option",3,ne),d()()),t&2&&(h("ngStyle",i.computeWidthStyle()),c(2),R(i.label()),c(),F("value",i.selectedPalette),c(2),h("width",i.triggerWidthPixels)("height",i.triggerHeightPixels)("colors",i.selectedPalette.palette),c(),H(i.palettes.palettes))},dependencies:[$,O,X,z,k,Q,U],encapsulation:2,changeDetection:0})}}return s})();export{Q as a,ve as b};
