import{Aa as W,C as q,D as V,G as x,Qa as j,e as Q,h as $,k as v,m as H,v as L}from"./chunk-GXN2U6XA.js";import{o as y}from"./chunk-5NZO7CYW.js";import{Aa as M,Fa as k,Gb as F,Jb as Y,Kb as B,Lb as R,Lc as N,Mb as I,Mc as P,Xa as X,ca as b,cc as S,dc as T,ib as C,ja as z,jc as O,tb as A}from"./chunk-VOP6QBU4.js";import"./chunk-VOSPIT4N.js";j();var ne=["container"],Z=(()=>{let t=class t{constructor(){this.platformId=b(k),this.element=b(M),this.container=P.required("container"),this.svgheight=N(),A({write:()=>{this.setupResizeObserver(),this.render()}})}ngOnDestroy(){this.resizeObserver?.disconnect()}setupResizeObserver(){y(this.platformId)&&(this.resizeObserver=new ResizeObserver(()=>{this.render()}),this.resizeObserver.observe(this.element.nativeElement))}render(){if(!y(this.platformId))return;let c=Q(800).map(Math.random),e={top:20,right:10,bottom:40,left:20},o=this.container().nativeElement.getBoundingClientRect().width;v(this.element.nativeElement).select("svg").remove();let l=v(this.element.nativeElement).append("svg").attr("width",o).attr("height",this.svgheight()),w=+o-e.left-e.right,u=+this.svgheight()-e.top-e.bottom,h=l.append("g").attr("transform","translate("+e.left+","+e.top+")"),p=x().range([0,w]),f=V(u/2,u/8),s=L().extent([[0,0],[w,u]]);h.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+u+")").call($(p));let D=h.append("g").attr("class","circle").selectAll("circle").data(c).enter().append("circle").attr("transform",n=>"translate("+p(n)+","+f()+")").attr("r",3.5),m=h.append("g").attr("class","brush").call(s),E=m.selectAll(".handle--custom").data([{type:"w"},{type:"e"}]).enter().append("path").attr("class","handle--custom").attr("fill","#666").attr("fill-opacity",.5).attr("stroke","#666").attr("stroke-width",0).attr("cursor","ew-resize").attr("d",W().innerRadius(0).outerRadius(u/2).startAngle(0).endAngle((n,i)=>i?Math.PI:-Math.PI));s.on("start brush end",n=>{let i=n.selection;if(i==null)E.attr("display","none"),D.classed("active",!1);else{let a=i.map(p.invert);D.classed("active",r=>a[0]<=r&&r<=a[1]),E.attr("display",null).attr("transform",(r,g)=>"translate("+i[g]+","+u/2+")")}}),m.call(s.move,[.3,.5].map(p))}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=C({type:t,selectors:[["app-d3-draggable-brush-brush-handles"]],viewQuery:function(e,o){e&1&&S(o.container,ne,5),e&2&&T()},inputs:{svgheight:[1,"svgheight"]},decls:4,vars:0,consts:[["container",""],[1,"container"]],template:function(e,o){e&1&&(B(0,"div",1,0),O(2,` This example demonstrates how to add visible and draggable handles to d3-brush, rather than that relying on the invisible boundary of the brush extent. The handle sizes here are exaggerated for demonstration purposes.
`),R(),z(),I(3,"svg"))},styles:[`circle{fill-opacity:.2;transition:fill-opacity .25s linear;fill:#228b22}circle.active{stroke:#0f0}.container{padding:12px}
`],encapsulation:2,changeDetection:0});let d=t;return d})();j();var re=["container2"],J=(()=>{let t=class t{constructor(){this.platformId=b(k),this.element=b(M),this.container=P.required("container2"),this.svgheight=N(),A({write:()=>{this.setupResizeObserver(),this.render()}})}ngOnDestroy(){this.resizeObserver?.disconnect()}setupResizeObserver(){y(this.platformId)&&(this.resizeObserver=new ResizeObserver(()=>{this.render()}),this.resizeObserver.observe(this.element.nativeElement))}render(){if(!y(this.platformId))return;let c=Q(800).map(Math.random),e={top:20,right:10,bottom:40,left:20},o=this.container().nativeElement.getBoundingClientRect().width;v(this.element.nativeElement).select("svg").remove();let l=v(this.element.nativeElement).append("svg").attr("width",o).attr("height",this.svgheight()),w=+o-e.left-e.right,u=+this.svgheight()-e.top-e.bottom,h=l.append("g").attr("transform","translate("+e.left+","+e.top+")"),p=x().range([0,w]),f=V(u/2,u/8),s=L().extent([[0,0],[w,u]]);h.append("g").attr("class","axis axis--x").attr("transform","translate(0,"+u+")").call($(p));let D=h.append("g").attr("class","circle").selectAll("circle").data(c).enter().append("circle").attr("transform",i=>"translate("+p(i)+","+f()+")").attr("r",3.5),m=h.append("g").attr("class","brush").call(s),E=i=>{let a=+(i.type==="e"),r=a?1:-1,g=u/2;return`M${.5*r},${g}A6,6 0 0 ${a} ${6.5*r},${g+6}V${2*g-6}A6,6 0 0 ${a} ${.5*r},${2*g}ZM${2.5*r},${g+8}V${2*g-8}M${4.5*r},${g+8}V${2*g-8}`},n=m.selectAll(".handle--custom").data([{type:"w"},{type:"e"}]).enter().append("path").attr("class","handle--custom").attr("fill","transparent").attr("stroke","#666").attr("stroke-width",1.5).attr("cursor","ew-resize").attr("d",E);s.on("start brush end",i=>{let a=i.selection;if(a==null)n.attr("display","none"),D.classed("active",!1);else{let r=a.map(p.invert);D.classed("active",g=>r[0]<=g&&g<=r[1]),n.attr("display",null).attr("transform",(g,U)=>"translate("+a[U]+","+-u/4+")")}}),m.call(s.move,[.3,.5].map(p))}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=C({type:t,selectors:[["app-d3-draggable-brush-brush-handles-2"]],viewQuery:function(e,o){e&1&&S(o.container,re,5),e&2&&T()},inputs:{svgheight:[1,"svgheight"]},decls:4,vars:0,consts:[["container2",""],[1,"container"]],template:function(e,o){e&1&&(B(0,"div",1,0),O(2,"The same, but with a slightly different handle."),R(),z(),I(3,"svg"))},styles:[`circle{fill-opacity:.2;transition:fill-opacity .25s linear;fill:#228b22}circle.active{stroke:#0f0}.container{padding:12px}
`],encapsulation:2,changeDetection:0});let d=t;return d})();j();var ie=["container3"],K=(()=>{let t=class t{constructor(){this.platformId=b(k),this.element=b(M),this.container=P.required("container3"),this.svgheight=N(),A({write:()=>{this.setupResizeObserver(),this.render()}})}ngOnDestroy(){this.resizeObserver?.disconnect()}setupResizeObserver(){y(this.platformId)&&(this.resizeObserver=new ResizeObserver(()=>{this.render()}),this.resizeObserver.observe(this.element.nativeElement))}render(){if(!y(this.platformId))return;let c=q(0,10),e=V(.5,.12),o=Q(800).map(()=>[c(),e()]),l={top:20,right:10,bottom:40,left:20},w=this.container().nativeElement.getBoundingClientRect().width;v(this.element.nativeElement).select("svg").remove();let u=v(this.element.nativeElement).append("svg").attr("width",w).attr("height",this.svgheight()),h=+w-l.left-l.right,p=+this.svgheight()-l.top-l.bottom,f=u.append("g").attr("transform","translate("+l.left+","+l.top+")"),s=x().domain([0,10]).range([0,h]),D=x().range([p,0]),m=L().extent([[0,0],[h,p]]),E=f.append("g").attr("fill-opacity",.2).selectAll("circle").data(o).enter().append("circle").attr("transform",n=>"translate("+s(n[0])+","+D(n[1])+")").attr("r",3.5);m.on("start brush end",n=>{let i=n.selection;if(i==null)E.classed("activa",!1);else{let a=i.map(s.invert);E.classed("active",r=>a[0]<=r[0]&&r[0]<=a[1])}}),f.append("g").call(m).call(m.move,[3,5].map(s)).selectAll(".overlay").each(n=>{n.type="selection"}).on("mousedown touchstart",function(n){let i=s(1)-s(0),a=H(n)[0][0],r=a-i/2,g=a+i/2;v(this.parentNode).call(m.move,g>h?[h-i,h]:r<0?[0,i]:[r,g])}),f.append("g").attr("transform","translate(0,"+p+")").call($(s))}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=C({type:t,selectors:[["app-d3-draggable-brush-click-to-recenter-brush"]],viewQuery:function(e,o){e&1&&S(o.container,ie,5),e&2&&T()},inputs:{svgheight:[1,"svgheight"]},decls:6,vars:0,consts:[["container3",""],[1,"container"]],template:function(e,o){e&1&&(B(0,"div",1,0)(2,"h3"),O(3,"Click to re-center brush"),R(),O(4,` This customization is implemented by changing the type of the brush's overlay element from overlay to selection so that clicking and dragging on the overlay element behaves identically to clicking and dragging on the brush selection. (The overlay element is the invisible rect element that receives pointer events when clicking outside the brush selection.) When the overlay is clicked and before brushing starts, the brush is recentered around the pointer, such that the brush remains centered around the pointer during brushing.
`),R(),z(),I(5,"svg"))},styles:[`circle{fill-opacity:.2;transition:fill-opacity .25s linear;fill:#228b22}circle.active{stroke:#0f0}.container{padding:12px}
`],encapsulation:2,changeDetection:0});let d=t;return d})();j();var se=["container4"],ee=(()=>{let t=class t{constructor(){this.platformId=b(k),this.element=b(M),this.container=P.required("container4"),this.svgheight=N(),A({write:()=>{this.setupResizeObserver(),this.render()}})}ngOnDestroy(){this.resizeObserver?.disconnect()}setupResizeObserver(){y(this.platformId)&&(this.resizeObserver=new ResizeObserver(()=>{this.render()}),this.resizeObserver.observe(this.element.nativeElement))}render(){if(!y(this.platformId))return;let c=q(0,10),e=V(.5,.12),o=Q(800).map(()=>[c(),e()]),l={top:20,right:10,bottom:40,left:20},w=this.container().nativeElement.getBoundingClientRect().width;v(this.element.nativeElement).select("svg").remove();let u=v(this.element.nativeElement).append("svg").attr("width",w).attr("height",this.svgheight()),h=+w-l.left-l.right,p=+this.svgheight()-l.top-l.bottom,f=u.append("g").attr("transform","translate("+l.left+","+l.top+")"),s=x().domain([0,10]).range([0,h]),D=x().range([p,0]),m=L().extent([[0,0],[h,p]]),E=f.append("g").attr("fill-opacity",.2).selectAll("circle").data(o).enter().append("circle").attr("transform",n=>"translate("+s(n[0])+","+D(n[1])+")").attr("r",3.5);m.on("start brush",n=>{let i=n.selection;if(!i)return;let a=i.map(s.invert);E.classed("active",r=>a[0]<=r[0]&&r[0]<=a[1])}),m.on("end",function(n){if(!n.sourceEvent)return;let i=n.selection;if(!i)return;let a=i.map(s.invert),r=a.map(Math.round);r[0]>=r[1]&&(r[0]=Math.floor(a[0]),r[1]=r[0]+1),v(this).transition().call(m.move,r.map(s))}),f.append("g").call(m).call(m.move,[3,5].map(s)).selectAll(".overlay").each(n=>{n.type="selection"}).on("mousedown touchstart",function(n){let i=s(1)-s(0),a=H(n)[0][0],r=a-i/2,g=a+i/2;v(this.parentNode).call(m.move,g>h?[h-i,h]:r<0?[0,i]:[r,g])}),f.append("g").attr("transform","translate(0,"+p+")").call($(s))}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=C({type:t,selectors:[["app-d3-draggable-brush-click-to-recenter-brush-2"]],viewQuery:function(e,o){e&1&&S(o.container,se,5),e&2&&T()},inputs:{svgheight:[1,"svgheight"]},decls:4,vars:0,consts:[["container4",""],[1,"container"]],template:function(e,o){e&1&&(B(0,"div",1,0),O(2,` A variation of the previous example with snapping on brushend.
`),R(),z(),I(3,"svg"))},styles:[`circle{fill-opacity:.2;transition:fill-opacity .25s linear;fill:#228b22}circle.active{stroke:#0f0}.container{padding:12px}
`],encapsulation:2,changeDetection:0});let d=t;return d})();j();var ae=["container5"],te=(()=>{let t=class t{constructor(){this.platformId=b(k),this.element=b(M),this.container=P.required("container5"),this.svgheight=N(),A({write:()=>{this.setupResizeObserver(),this.render()}})}ngOnDestroy(){this.resizeObserver?.disconnect()}setupResizeObserver(){y(this.platformId)&&(this.resizeObserver=new ResizeObserver(()=>{this.render()}),this.resizeObserver.observe(this.element.nativeElement))}render(){if(!y(this.platformId))return;let c=q(0,10),e=V(.5,.12),o=Q(800).map(()=>[c(),e()]),l={top:20,right:10,bottom:40,left:20},w=this.container().nativeElement.getBoundingClientRect().width;v(this.element.nativeElement).select("svg").remove();let u=v(this.element.nativeElement).append("svg").attr("width",w).attr("height",this.svgheight()),h=+w-l.left-l.right,p=+this.svgheight()-l.top-l.bottom,f=u.append("g").attr("transform","translate("+l.left+","+l.top+")"),s=x().domain([0,10]).range([0,h]),D=x().range([p,0]),m=L().extent([[0,0],[h,p]]),E=f.append("g").attr("fill-opacity",.2).selectAll("circle").data(o).enter().append("circle").attr("transform",n=>"translate("+s(n[0])+","+D(n[1])+")").attr("r",3.5);m.on("start brush end",n=>{let i=n.selection;if(i==null)E.classed("activa",!1);else{let a=i.map(s.invert);E.classed("active",r=>a[0]<=r[0]&&r[0]<=a[1])}}),f.append("g").call(m).call(m.move,[3,5].map(s)).selectAll(".overlay").on("mousedown touchstart",function(n){n.stopImmediatePropagation(),v(this.parentNode).transition().call(m.move,s.range())},!0),f.append("g").attr("transform","translate(0,"+p+")").call($(s))}};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=C({type:t,selectors:[["app-d3-draggable-brush-click-to-select-all"]],viewQuery:function(e,o){e&1&&S(o.container,ae,5),e&2&&T()},inputs:{svgheight:[1,"svgheight"]},decls:6,vars:0,consts:[["container5",""],[1,"container"]],template:function(e,o){e&1&&(B(0,"div",1,0)(2,"h3"),O(3,"Click to select all"),R(),O(4,` By default, clicking and dragging outside the current brush selection drags a new selection. This brush has been modified such that this interaction instead selects everything.
`),R(),z(),I(5,"svg"))},styles:[`circle{fill-opacity:.2;transition:fill-opacity .25s linear;fill:#228b22}circle.active{stroke:#0f0}.container{padding:12px}
`],encapsulation:2,changeDetection:0});let d=t;return d})();var qe=(()=>{let t=class t{};t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=C({type:t,selectors:[["app-d3-draggable-brush"]],decls:9,vars:5,consts:[[1,"brush-handles",3,"svgheight"]],template:function(e,o){e&1&&Y(0,"app-d3-draggable-brush-brush-handles",0)(1,"br")(2,"app-d3-draggable-brush-brush-handles-2",0)(3,"br")(4,"app-d3-draggable-brush-click-to-recenter-brush",0)(5,"br")(6,"app-d3-draggable-brush-click-to-recenter-brush-2",0)(7,"br")(8,"app-d3-draggable-brush-click-to-select-all",0),e&2&&(F("svgheight",128),X(2),F("svgheight",128),X(2),F("svgheight",128),X(2),F("svgheight",128),X(2),F("svgheight",128))},dependencies:[Z,J,K,ee,te],styles:[".brush-handles[_ngcontent-%COMP%]{margin:0;padding:0}"],changeDetection:0});let d=t;return d})();export{qe as DraggableBrushComponent};
