import{a as P,b as O}from"./chunk-PXSDDD5C.js";import{a as j}from"./chunk-DMLMBZ2P.js";import{a as b,b as N}from"./chunk-7MS4SRDN.js";import{b as Q}from"./chunk-67GZXPBX.js";import{a as B}from"./chunk-NBFQFBAI.js";import{d as z}from"./chunk-X5WVURWV.js";import{a as D,f as H}from"./chunk-EWLX7HQJ.js";import{b as S,g as V,i as q,j as E,l as F,m as W,r as I}from"./chunk-QRHIHKQC.js";import{Eb as C,Jb as r,Jc as T,Kb as s,Pb as d,Tb as L,Ub as m,ab as p,ec as c,jc as f,ka as h,kc as _,la as l,lc as u,nb as v,tb as M,ya as w,za as x,zb as g}from"./chunk-X346Y2AD.js";import{a as o}from"./chunk-6NE7JDAX.js";function k(i,y){if(i&1){let t=d();r(0,"mb-hilbert-transformer-cycle-estimator-params",4),L("selectionChange",function(a){h(t);let n=m();return l(n.estimatorParamsParam=a)}),s()}if(i&2){let t=m();g("initial",t.estimatorParamsParam)}}function G(i,y){if(i&1){let t=d();r(0,"mat-form-field",5)(1,"mat-label"),c(2,"Fast \u2113"),s(),r(3,"input",6),u("ngModelChange",function(a){h(t);let n=m();return _(n.fastLengthParam,a)||(n.fastLengthParam=a),l(a)}),s()(),r(4,"mat-form-field",5)(5,"mat-label"),c(6,"Slow \u2113"),s(),r(7,"input",6),u("ngModelChange",function(a){h(t);let n=m();return _(n.slowLengthParam,a)||(n.slowLengthParam=a),l(a)}),s()()}if(i&2){let t=m();p(3),f("ngModel",t.fastLengthParam),p(4),f("ngModel",t.slowLengthParam)}}function J(i,y){if(i&1){let t=d();r(0,"mat-form-field",5)(1,"mat-label"),c(2,"Fast \u03B1"),s(),r(3,"input",7),u("ngModelChange",function(a){h(t);let n=m();return _(n.fastAlphaParam,a)||(n.fastAlphaParam=a),l(a)}),s()(),r(4,"mat-form-field",5)(5,"mat-label"),c(6,"Slow \u03B1"),s(),r(7,"input",7),u("ngModelChange",function(a){h(t);let n=m();return _(n.slowAlphaParam,a)||(n.slowAlphaParam=a),l(a)}),s()()}if(i&2){let t=m();p(3),f("ngModel",t.fastAlphaParam),p(4),f("ngModel",t.slowAlphaParam)}}function K(i,y){if(i&1){let t=d();r(0,"mb-bar-component",8),L("selectionChange",function(a){h(t);let n=m();return l(n.barComponentChanged(a))}),s()}if(i&2){let t=m();g("initial",t.barComponent)}}function R(i,y){if(i&1){let t=d();r(0,"mb-quote-component",8),L("selectionChange",function(a){h(t);let n=m();return l(n.quoteComponentChanged(a))}),s()}if(i&2){let t=m();g("initial",t.quoteComponent)}}var U=i=>"fastLimitLength"in i,lt=(()=>{class i{get estimatorTypeParam(){return this.paramsLength.estimatorType||P.HomodyneDiscriminator}set estimatorTypeParam(t){this.paramsAlpha.estimatorType=t,this.paramsAlpha=o({},this.paramsAlpha),this.paramsLength.estimatorType=t,this.paramsLength=o({},this.paramsLength),this.notify()}estimatorTypeChanged(t){this.estimatorTypeParam=t}get estimatorParamsParam(){return this.estimatorParams}set estimatorParamsParam(t){this.paramsAlpha.estimatorParams=t,this.paramsAlpha=o({},this.paramsAlpha),this.paramsLength.estimatorParams=t,this.paramsLength=o({},this.paramsLength),this.estimatorParams=t,this.notify()}get fastLengthParam(){return this.paramsLength.fastLimitLength}set fastLengthParam(t){(!t||t<2)&&(t=2);let e=2/(t+1);e=e<1e-4?1e-4:e,e=e>1?1:e,this.paramsAlpha.fastLimitSmoothingFactor=e,this.paramsAlpha=o({},this.paramsAlpha),this.paramsLength.fastLimitLength=t,this.paramsLength=o({},this.paramsLength),this.notify()}get slowLengthParam(){return this.paramsLength.slowLimitLength}set slowLengthParam(t){(!t||t<2)&&(t=2);let e=2/(t+1);e=e<1e-4?1e-4:e,e=e>1?1:e,this.paramsAlpha.slowLimitSmoothingFactor=e,this.paramsAlpha=o({},this.paramsAlpha),this.paramsLength.slowLimitLength=t,this.paramsLength=o({},this.paramsLength),this.notify()}get useAlpha(){return this.useAlphaInternal}set useAlpha(t){this.useAlphaInternal!==t&&(this.useAlphaInternal=t,this.useAlphaInternal?(this.paramsAlpha=o({},this.paramsAlpha),this.notify()):(this.paramsLength=o({},this.paramsLength),this.notify()))}get fastAlphaParam(){return this.paramsAlpha.fastLimitSmoothingFactor}set fastAlphaParam(t){(!t||t>1)&&(t=1);let e=2/t-1;e=e<2?2:e,e=e>1024?1024:e,this.paramsLength.fastLimitLength=e,this.paramsAlpha.fastLimitSmoothingFactor=t,this.paramsAlpha=o({},this.paramsAlpha),this.notify()}get slowAlphaParam(){return this.paramsAlpha.slowLimitSmoothingFactor}set slowAlphaParam(t){(!t||t>1)&&(t=1);let e=2/t-1;e=e<2?2:e,e=e>1024?1024:e,this.paramsLength.slowLimitLength=e,this.paramsAlpha.slowLimitSmoothingFactor=t,this.paramsAlpha=o({},this.paramsAlpha),this.notify()}constructor(){this.initialized=!1,this.useAlphaInternal=!1,this.paramsLength={fastLimitLength:3,slowLimitLength:39,estimatorType:P.HomodyneDiscriminator,barComponent:b.Close},this.paramsAlpha={fastLimitSmoothingFactor:.5,slowLimitSmoothingFactor:.05,estimatorType:P.HomodyneDiscriminator,barComponent:b.Close},this.barComponentVisible=this.barComponent!==void 0,this.quoteComponentVisible=this.quoteComponent!==void 0,this.estimatorParams={smoothingLength:3,alphaEmaQuadratureInPhase:.3,alphaEmaPeriod:.3},this.estimatorParamsVisible=!1,this.selectionChange=w(),this.initial=x.required(),T(()=>{let t=this.initial();U(t)?(this.useAlpha=!1,this.paramsLength=t,this.slowLengthParam=t.slowLimitLength,this.fastLengthParam=t.fastLimitLength):(this.useAlpha=!0,this.paramsAlpha=t,this.slowAlphaParam=t.slowLimitSmoothingFactor,this.fastAlphaParam=t.fastLimitSmoothingFactor),this.estimatorTypeParam=t.estimatorType||P.HomodyneDiscriminator,t.estimatorParams&&(this.estimatorParams=t.estimatorParams,this.estimatorParamsVisible=!0,this.estimatorParamsParam=t.estimatorParams),this.paramsLength.barComponent=t.barComponent,this.paramsAlpha.barComponent=t.barComponent,this.barComponent=t.barComponent,this.paramsLength.quoteComponent=t.quoteComponent,this.paramsAlpha.quoteComponent=t.quoteComponent,this.quoteComponent=t.quoteComponent,this.barComponentVisible=t.barComponent!==void 0,this.quoteComponentVisible=t.quoteComponent!==void 0})}ngAfterContentInit(){this.initialized=!0,this.notify()}barComponentChanged(t){this.paramsLength.barComponent=t,this.paramsAlpha.barComponent=t,this.paramsLength=o({},this.paramsLength),this.paramsAlpha=o({},this.paramsAlpha),this.notify()}quoteComponentChanged(t){this.paramsLength.quoteComponent=t,this.paramsAlpha.quoteComponent=t,this.paramsLength=o({},this.paramsLength),this.paramsAlpha=o({},this.paramsAlpha),this.notify()}notify(){this.initialized&&(this.useAlpha?this.selectionChange.emit(this.paramsAlpha):this.selectionChange.emit(this.paramsLength))}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275cmp=v({type:i,selectors:[["mb-mesa-adaptive-moving-average-params"]],inputs:{initial:[1,"initial"]},outputs:{selectionChange:"selectionChange"},decls:8,vars:9,consts:[[1,"mr",3,"selectionChange","initial","label"],[3,"initial"],[1,"mr",3,"ngModelChange","color","ngModel"],[1,"mr",3,"initial"],[3,"selectionChange","initial"],["appearance","fill","floatLabel","always",1,"mr",2,"width","6em"],["type","number","matInput","","min","2","max","1024","step","1",3,"ngModelChange","ngModel"],["type","number","matInput","","min","0.001","max","0.999","step","0.001",3,"ngModelChange","ngModel"],[1,"mr",3,"selectionChange","initial"]],template:function(e,a){e&1&&(r(0,"mb-hilbert-transformer-cycle-estimator-type",0),L("selectionChange",function(A){return a.estimatorTypeChanged(A)}),s(),M(1,k,1,1,"mb-hilbert-transformer-cycle-estimator-params",1),r(2,"mat-slide-toggle",2),u("ngModelChange",function(A){return _(a.useAlpha,A)||(a.useAlpha=A),A}),c(3,"Alpha"),s(),M(4,G,8,2)(5,J,8,2)(6,K,1,1,"mb-bar-component",3)(7,R,1,1,"mb-quote-component",3)),e&2&&(g("initial",a.estimatorTypeParam)("label","Estimator"),p(),C(a.estimatorParamsVisible?1:-1),p(),g("color","primary"),f("ngModel",a.useAlpha),p(2),C(a.useAlpha?-1:4),p(),C(a.useAlpha?5:-1),p(),C(a.barComponentVisible?6:-1),p(),C(a.quoteComponentVisible?7:-1))},dependencies:[I,S,E,V,W,F,q,H,D,z,B,O,j,N,Q],styles:[".mr[_ngcontent-%COMP%]{margin-right:.55em}"],changeDetection:0})}}return i})();export{lt as a};
